import{a as f,j as e,A as N,m as g}from"./app-C4-wZLjv.js";import{B as x}from"./button-BtXHUDlw.js";import{F as w}from"./file-text-BlmxyJcG.js";import{M as y}from"./maximize-2-LnnShh8S.js";import{F as b}from"./file-Br47PucB.js";import{C as k}from"./clock-CiUKO93g.js";import{E as C}from"./eye-CExwr-rA.js";import{D as _}from"./download-BeIOZcTV.js";import{X as F}from"./x-cYyiHa3X.js";import{c as L}from"./createLucideIcon-DDKIJ2e3.js";import{C as M}from"./copy-O9zlw-jg.js";import"./app-Ctpas7OY.js";import"./index-CmRgzCPv.js";import"./index-Buz4j_7Y.js";import"./index-CHXMgrNC.js";import"./utils-CFcDjcb_.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],D=L("ExternalLink",z),E="/storage/";function T({question:t,answers:j,onTeacherScore:i}){const n=j[0]||{},a=n.answer_files?.[0]||{},l=a.file_path?`${E}${a.file_path}`:null,h=a.file_name||"submitted_file",[v,c]=f.useState(!1),[r,o]=f.useState(n.manual_score??n.points_earned??0),{extension:p,isImage:d}=f.useMemo(()=>{const s=(a.file_path||"").split(".").pop().toLowerCase();return{extension:s,isImage:["jpg","jpeg","png","gif","webp"].includes(s)}},[a.file_path]);return e.jsxs("div",{className:"space-y-6",children:[l?e.jsx("div",{className:"overflow-hidden rounded-2xl border border-border bg-background shadow-sm transition-all hover:shadow-md",children:e.jsxs("div",{className:"flex flex-col sm:flex-row",children:[e.jsx("div",{className:"group relative aspect-square w-full cursor-zoom-in overflow-hidden bg-muted sm:w-48",onClick:()=>d&&c(!0),children:d?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:l,alt:"Preview",className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:e.jsx(y,{className:"text-white"})})]}):e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2",children:[e.jsx(b,{className:"h-10 w-10 text-primary/40"}),e.jsx("span",{className:"text-[10px] font-black text-muted-foreground uppercase",children:p})]})}),e.jsx("div",{className:"flex flex-1 flex-col justify-between p-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-[10px] font-bold tracking-widest text-muted-foreground uppercase",children:[e.jsx(k,{className:"h-3 w-3"})," ",new Date(a.created_at||n.created_at).toLocaleDateString()]}),e.jsx("h4",{className:"mb-4 line-clamp-1 text-lg font-bold text-foreground",children:h}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>c(!0),className:"rounded-xl",children:[e.jsx(C,{className:"mr-2 h-3.5 w-3.5"})," ","View ",d?"Lightbox":"Details"]}),e.jsx(x,{variant:"outline",size:"sm",asChild:!0,className:"rounded-xl",children:e.jsxs("a",{href:l,download:!0,children:[e.jsx(_,{className:"mr-2 h-3.5 w-3.5"})," ","Download"]})})]})]})})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-muted p-12 text-center",children:[e.jsx(w,{className:"mb-4 h-12 w-12 text-muted-foreground/20"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No file submitted."})]}),i&&l&&e.jsxs("div",{className:"group relative flex flex-col overflow-hidden rounded-2xl border border-primary/10 bg-card shadow-lg transition-all hover:border-primary/30 md:flex-row md:items-center",children:[e.jsx("div",{className:"relative flex  flex-row items-center justify-center gap-3 bg-primary px-6 py-4 text-primary-foreground md:flex-col md:py-6",children:e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("input",{type:"number",step:"0.5",value:r,onChange:s=>{const m=s.target.value===""?0:parseFloat(s.target.value),u=Math.min(t.point,Math.max(0,m));o(u),i(t.id,u)},className:"w-16 bg-transparent text-right font-mono text-xl font-black tabular-nums transition-transform outline-none focus:scale-110"}),e.jsx("span",{className:"text-sm font-bold opacity-50",children:"pts"})]})}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 lg:flex-row lg:items-center lg:gap-8",children:[e.jsxs("div",{className:"flex flex-1 flex-col gap-1.5",children:[e.jsxs("div",{className:"flex justify-between px-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground/60 uppercase",children:"Scoring Tier"}),e.jsx("button",{onClick:()=>{o(0),i(t.id,0)},className:"text-[10px] font-bold text-red-500 uppercase opacity-0 transition-opacity group-hover:opacity-100 hover:underline",children:"Reset"})]}),e.jsx("div",{className:"relative flex items-center",children:e.jsx("input",{type:"range",min:"0",max:t.point,step:"0.5",value:r,onChange:s=>{const m=parseFloat(s.target.value);o(m),i(t.id,m)},style:{background:`linear-gradient(to right, hsl(var(--primary)) ${r/t.point*100}%, hsl(var(--muted)) ${r/t.point*100}%)`},className:"h-2 w-full cursor-pointer rounded-full accent-primary"})})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex overflow-hidden rounded-xl border border-border shadow-sm",children:[e.jsx("button",{onClick:()=>{const s=Math.max(0,r-.5);o(s),i(t.id,s)},className:"flex h-9 w-9 items-center justify-center bg-background font-bold transition-colors hover:bg-muted active:bg-primary/10",children:"−"}),e.jsx("div",{className:"w-[1px] bg-border"}),e.jsx("button",{onClick:()=>{const s=Math.min(t.point,r+.5);o(s),i(t.id,s)},className:"flex h-9 w-9 items-center justify-center bg-background font-bold transition-colors hover:bg-muted active:bg-primary/10",children:"+"})]})})]})]}),e.jsx(N,{children:v&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-10",children:[e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>c(!1),className:"absolute inset-0 bg-black/90 backdrop-blur-sm"}),e.jsxs(g.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative z-10 flex h-full max-h-[90vh] w-full max-w-5xl flex-col overflow-hidden rounded-3xl bg-card shadow-2xl md:flex-row",children:[e.jsx("button",{onClick:()=>c(!1),className:"absolute top-4 right-4 z-20 rounded-full bg-black/20 p-2 text-white transition-colors hover:bg-black/40 md:text-foreground md:hover:bg-muted",children:e.jsx(F,{className:"h-6 w-6"})}),e.jsx("div",{className:"flex flex-[2] items-center justify-center bg-zinc-950 p-4",children:d?e.jsx("img",{src:l,alt:"Full view",className:"max-h-full max-w-full object-contain shadow-2xl"}):e.jsxs("div",{className:"flex flex-col items-center gap-4 text-white",children:[e.jsx(b,{className:"h-24 w-24 opacity-20"}),e.jsxs("p",{className:"text-sm font-medium",children:["Preview not available for"," ",p," files"]})]})}),e.jsxs("div",{className:"flex flex-1 flex-col justify-between border-l border-border bg-card p-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-2xl font-black tracking-tight text-foreground",children:h}),e.jsxs("p",{className:"text-sm font-bold tracking-widest text-muted-foreground uppercase",children:[p," Document •"," ",(a.file_size/1024).toFixed(1)," ","KB"]})]}),e.jsx("hr",{className:"border-border"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-bold tracking-tighter text-muted-foreground uppercase",children:"Status"}),e.jsx("p",{className:"text-sm font-semibold text-green-600 uppercase",children:"Submitted"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-bold tracking-tighter text-muted-foreground uppercase",children:"Current Score"}),e.jsxs("p",{className:"text-sm font-semibold",children:[r," / ",t.point]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(x,{asChild:!0,className:"w-full rounded-xl",children:e.jsxs("a",{href:l,target:"_blank",rel:"noreferrer",children:[e.jsx(D,{className:"mr-2 h-4 w-4"})," ","Open Original"]})}),e.jsxs(x,{variant:"outline",className:"w-full rounded-xl",onClick:()=>{navigator.clipboard.writeText(window.location.origin+l)},children:[e.jsx(M,{className:"mr-2 h-4 w-4"})," Copy Direct Link"]})]})]})]})]})})]})}export{T as default};
