const _=(c,e=[])=>{const i=Math.max(0,parseFloat(c.point||0));let a=0,t="unanswered";if(!e||e.length===0||!e[0].answer_text&&!e[0].option_id)return{earnedPoints:0,maxPoints:i,status:"unanswered"};const s=o=>(o??"").toString().trim().toLowerCase();switch(c.type){case"true_false":case"multiple_choice":{const o=e[0],n=c.options?.find(r=>r.is_correct===1);n&&s(o.answer_text)===s(n.option_text)?(a=i,t="correct"):t="incorrect";break}case"matching":{const o=c.options||[],n=o.length;if(n===0)break;let r=0;o.forEach(l=>{const d=e.find(p=>p.option_id===l.id);d&&d.answer_text===l.option_text&&r++}),a=r/n*i,r===n?t="correct":r>0?t="partial":t="incorrect";break}case"fill_blank":case"short_answer":{const o=s(e[0]?.answer_text),n=c.options?.some(r=>r.is_correct===1&&s(r.option_text)===o);if(e[0]?.points_earned>0){a=Math.min(e[0].points_earned,i),t=a===i?"correct":"partial";break}n?(a=i,t="correct"):(a=0,t=o?"review":"unanswered");break}default:t="review";break}return{earnedPoints:Math.round((a+Number.EPSILON)*100)/100,maxPoints:parseFloat(i.toFixed(2)),status:t}};export{_ as calculateAutoScore};
