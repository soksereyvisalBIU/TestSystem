import{g as u,a as m,j as e,H as h}from"./app-CtGYIsX5.js";import{B as j}from"./button-SSRY5RuB.js";import{A as g}from"./app-layout-BBM8JRvq.js";import{d as N}from"./index-BZB35nAZ.js";import{g as b,h as v,f as A,A as w,b as D,a as y,d as S,c as _,e as T}from"./alert-dialog-54XvE1iS.js";import{f as C}from"./format-CSQe5d3I.js";/* empty css            */import"./index-BKaEAUkC.js";import"./index-CEEHIV-V.js";import"./index-CHXMgrNC.js";import"./utils-CFcDjcb_.js";import"./index-ClDXPIEY.js";import"./dialog-CIu6aBNx.js";import"./index-DBcQu2g4.js";import"./index-CXdRv3aZ.js";import"./index-BVpJEfSU.js";import"./index-CNX5aJ-H.js";import"./index-C59Bp4nL.js";import"./index-DwRVN30-.js";import"./index-CRv2uW8x.js";import"./x-DU5AeFAo.js";import"./createLucideIcon-CxmHDfoc.js";import"./tooltip-Kptx307E.js";import"./index-C9d5FcxV.js";import"./index-84d56XFz.js";import"./index-G2kbjg3X.js";import"./index-C8PlrU9g.js";import"./index-aq0HBlNE.js";import"./avatar-DxZQoBSB.js";import"./index-D82MWXkw.js";import"./index-CMWG4mbA.js";import"./command-UaJet_Jc.js";import"./search-DRKxlw3r.js";import"./index-ikzcNs2d.js";import"./app-logo-icon-Bxpw9t1P.js";import"./layout-grid-DEAqSi1K.js";import"./users-DBrrkKjv.js";import"./settings-2-CRDbYWN2.js";import"./appearance-tabs-header-BY9j7uhR.js";import"./sun-CTkdtCHx.js";import"./book-open-B5VUcvi6.js";import"./chevron-right-D9BgXrdj.js";const E=[{title:"Dashboard",href:N().url}];function Ne(){const{props:d}=u();d?.course_id,d?.assessment_id;const[c,n]=m.useState(null),[r,o]=m.useState(null);m.useEffect(()=>{if(!assessment?.start_time||!assessment?.end_time)return;const t=new Date(assessment.start_time).getTime(),a=new Date(assessment.end_time).getTime(),l=setInterval(()=>{const s=Date.now();if(s<t){o("upcoming");const i=t-s;n(x(i))}else if(s>=t&&s<=a){o("active");const i=a-s;n(x(i))}else o("ended"),n(null)},1e3);return()=>clearInterval(l)},[assessment]);const x=t=>{const a=Math.floor(t/1e3),l=Math.floor(a/3600),s=Math.floor(a%3600/60),i=a%60;return[l.toString().padStart(2,"0"),s.toString().padStart(2,"0"),i.toString().padStart(2,"0")].join(":")};if(isError)return e.jsx("div",{className:"p-4 text-center text-red-500",children:"Error loading assessment."});if(!assessment)return e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No assessment found."});const p=t=>t?C(new Date(t),"PPpp"):"—",f=r==="active";return e.jsxs(g,{breadcrumbs:E,children:[e.jsx(h,{title:assessment?.title||"Dashboard"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsx("div",{className:"relative flex min-h-[80vh] flex-1 flex-col items-center justify-center overflow-hidden rounded-xl border border-sidebar-border/70 p-6 text-center dark:border-sidebar-border",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground",children:assessment.title}),assessment.description&&e.jsx("p",{className:"mt-2 text-muted-foreground",children:assessment.description})]}),r==="upcoming"&&e.jsxs("div",{className:"my-4 text-lg font-semibold text-blue-600 dark:text-blue-400",children:["Starts in: ",c]}),r==="active"&&e.jsxs("div",{className:"my-4 text-lg font-semibold text-green-600 dark:text-green-400",children:["Time remaining: ",c]}),r==="ended"&&e.jsx("div",{className:"my-4 text-lg font-semibold text-red-500",children:"Assessment ended"}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-1 text-center text-sm",children:[e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("div",{className:"border-e-2 border-white px-2",children:[e.jsx("span",{children:"Type:"})," ",e.jsx("span",{className:"font-semibold",children:assessment.type||"—"})]}),e.jsxs("div",{className:"border-e-2 border-white px-2",children:[e.jsx("span",{children:"Duration:"})," ",e.jsx("span",{className:"font-semibold",children:assessment.duration?`${assessment.duration} mins`:"—"})]}),e.jsxs("div",{className:"border-white px-2",children:[e.jsx("span",{children:"Max Attempts:"})," ",e.jsx("span",{className:"font-semibold",children:assessment.max_attempts||"—"})]})]}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsxs("div",{className:"flex justify-center",children:[e.jsx("span",{className:"w-28 font-semibold",children:"Start Time :"})," ",p(assessment.start_time)]}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx("span",{className:"w-28 font-semibold",children:"End Time :"})," ",p(assessment.end_time)]})]})]}),e.jsx("div",{className:"my-6",children:e.jsxs(b,{children:[e.jsx(v,{asChild:!0,children:e.jsx(j,{size:"lg",disabled:!f,className:"w-full cursor-pointer md:w-auto",children:r==="upcoming"?"Not Yet Started":r==="active"?"Start Attempt Now":"Assessment Closed"})}),e.jsxs(A,{children:[e.jsxs(w,{className:"text-center",children:[e.jsxs(D,{className:"flex flex-col items-center justify-center gap-4 text-center",children:[e.jsx("img",{className:"max-w-24 rounded-full p-2",src:"/assets/img/assessment/checklist.gif",alt:""}),e.jsx("span",{className:"text-xl",children:"Start Assessment"})]}),e.jsx(y,{className:"text-center",children:"Are you sure you want to start this assessment? Once started, your attempt will be recorded and timed."})]}),e.jsxs(S,{className:"justify-center text-center sm:justify-center",children:[e.jsx(_,{children:"Cancel"}),e.jsx(T,{onClick:()=>startAttempt.mutate(),disabled:startAttempt.isPending,children:startAttempt.isPending?"Starting...":"Start Attempt"})]})]})]})})]})})})]})}export{Ne as default};
