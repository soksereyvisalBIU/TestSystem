import{c as se,a as W,u as te,j as s,t as ie,r as le}from"./app-DbC9swOp.js";import{s as Y}from"./index-ikzcNs2d.js";import{B as Q}from"./button-B0cnHsLL.js";import{I as re}from"./input-DV2ZCF-T.js";import{L as $}from"./label-CW24IyLF.js";import{S as ae,a as ce,b as ne,c as oe,d as Z}from"./select-CenOXwYB.js";import{T as me}from"./textarea-DGCpYjuM.js";import{M as de}from"./modal-BJLUtyDK.js";import{X as pe}from"./x-BcxDNo4d.js";import{U as ue}from"./upload-Dwz5orjk.js";import{L as fe}from"./loader-circle-BpSRaWAV.js";function Ie(ee){const e=se.c(82),{isOpen:n,setIsOpen:c,classId:w,editingSubject:l}=ee,a=!!l?.id,[E,L]=W.useState(null);let U;e[0]===Symbol.for("react.memo_cache_sentinel")?(U={name:"",description:"",visibility:"public",cover:null},e[0]=U):U=e[0];const{data:t,setData:i,post:X,processing:m,errors:o,reset:q,clearErrors:A}=te(U);let D;e[1]!==A||e[2]!==l||e[3]!==a||e[4]!==n||e[5]!==q||e[6]!==i?(D=()=>{n&&(a&&l?(i({name:l.name||"",description:l.description||"",visibility:l.visibility||"public",cover:null}),L(l.cover?`/storage/${l.cover}`:null)):(q(),A(),L(null)))},e[1]=A,e[2]=l,e[3]=a,e[4]=n,e[5]=q,e[6]=i,e[7]=D):D=e[7];let M;e[8]!==l||e[9]!==a||e[10]!==n?(M=[n,l,a],e[8]=l,e[9]=a,e[10]=n,e[11]=M):M=e[11],W.useEffect(D,M);let z;e[12]!==i?(z=r=>{if(r){if(r.size>2097152){ie.error("Max image size is 2MB");return}L(URL.createObjectURL(r)),i("cover",r)}},e[12]=i,e[13]=z):z=e[13];const G=z;let R;e[14]!==w||e[15]!==t.cover||e[16]!==t.description||e[17]!==t.name||e[18]!==t.visibility||e[19]!==l||e[20]!==a||e[21]!==X||e[22]!==c?(R=r=>{r.preventDefault(),a?le.post(Y("instructor.classes.subjects.update",[w,l.id]),{_method:"put",name:t.name,description:t.description,visibility:t.visibility,cover:t.cover},{forceFormData:!0,onSuccess:()=>{c(!1)}}):X(Y("instructor.classes.subjects.store",w),{forceFormData:!0,onSuccess:()=>{c(!1)}})},e[14]=w,e[15]=t.cover,e[16]=t.description,e[17]=t.name,e[18]=t.visibility,e[19]=l,e[20]=a,e[21]=X,e[22]=c,e[23]=R):R=e[23];const H=R,J=a?"Update Subject":"Create Subject";let B;e[24]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx($,{children:"Subject Name"}),e[24]=B):B=e[24];let d;e[25]!==i?(d=r=>i("name",r.target.value),e[25]=i,e[26]=d):d=e[26];let p;e[27]!==t.name||e[28]!==d?(p=s.jsx(re,{value:t.name,onChange:d}),e[27]=t.name,e[28]=d,e[29]=p):p=e[29];let u;e[30]!==o.name?(u=o.name&&s.jsx("p",{className:"text-xs text-destructive",children:o.name}),e[30]=o.name,e[31]=u):u=e[31];let f;e[32]!==u||e[33]!==p?(f=s.jsxs("div",{className:"space-y-2",children:[B,p,u]}),e[32]=u,e[33]=p,e[34]=f):f=e[34];let F;e[35]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx($,{children:"Description"}),e[35]=F):F=e[35];let x;e[36]!==i?(x=r=>i("description",r.target.value),e[36]=i,e[37]=x):x=e[37];let v;e[38]!==t.description||e[39]!==x?(v=s.jsx(me,{value:t.description,onChange:x}),e[38]=t.description,e[39]=x,e[40]=v):v=e[40];let h;e[41]!==o.description?(h=o.description&&s.jsx("p",{className:"text-xs text-destructive",children:o.description}),e[41]=o.description,e[42]=h):h=e[42];let b;e[43]!==v||e[44]!==h?(b=s.jsxs("div",{className:"space-y-2",children:[F,v,h]}),e[43]=v,e[44]=h,e[45]=b):b=e[45];let O;e[46]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx($,{children:"Visibility"}),e[46]=O):O=e[46];let j;e[47]!==i?(j=r=>i("visibility",r),e[47]=i,e[48]=j):j=e[48];let P;e[49]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(ce,{children:s.jsx(ne,{})}),e[49]=P):P=e[49];let T;e[50]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsxs(oe,{children:[s.jsx(Z,{value:"public",children:"Public"}),s.jsx(Z,{value:"private",children:"Private"})]}),e[50]=T):T=e[50];let y;e[51]!==t.visibility||e[52]!==j?(y=s.jsxs("div",{className:"space-y-2",children:[O,s.jsxs(ae,{value:t.visibility,onValueChange:j,children:[P,T]})]}),e[51]=t.visibility,e[52]=j,e[53]=y):y=e[53];let V;e[54]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx($,{children:"Cover Image"}),e[54]=V):V=e[54];let S;e[55]!==G||e[56]!==E||e[57]!==i?(S=s.jsxs("div",{className:"space-y-2",children:[V,s.jsx("div",{className:"rounded-xl border-2 border-dashed p-4",children:E?s.jsxs("div",{className:"relative h-40",children:[s.jsx("img",{src:E,className:"h-full w-full rounded-lg object-cover"}),s.jsx(Q,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>{L(null),i("cover",null)},children:s.jsx(pe,{className:"h-4 w-4"})})]}):s.jsxs("label",{className:"flex cursor-pointer flex-col items-center gap-2 py-4",children:[s.jsx(ue,{className:"h-5 w-5"}),s.jsx("span",{className:"text-xs",children:"Upload Image"}),s.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:r=>G(r.target.files?.[0])})]})})]}),e[55]=G,e[56]=E,e[57]=i,e[58]=S):S=e[58];let g;e[59]!==c?(g=s.jsx(Q,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e[59]=c,e[60]=g):g=e[60];let N;e[61]!==m?(N=m&&s.jsx(fe,{className:"mr-2 h-4 w-4 animate-spin"}),e[61]=m,e[62]=N):N=e[62];const K=a?"Save Changes":"Create";let _;e[63]!==m||e[64]!==N||e[65]!==K?(_=s.jsxs(Q,{type:"submit",disabled:m,children:[N,K]}),e[63]=m,e[64]=N,e[65]=K,e[66]=_):_=e[66];let C;e[67]!==g||e[68]!==_?(C=s.jsxs("div",{className:"flex justify-end gap-3 border-t pt-5",children:[g,_]}),e[67]=g,e[68]=_,e[69]=C):C=e[69];let I;e[70]!==H||e[71]!==f||e[72]!==b||e[73]!==y||e[74]!==S||e[75]!==C?(I=s.jsxs("form",{className:"space-y-6 pt-4",onSubmit:H,children:[f,b,y,S,C]}),e[70]=H,e[71]=f,e[72]=b,e[73]=y,e[74]=S,e[75]=C,e[76]=I):I=e[76];let k;return e[77]!==n||e[78]!==c||e[79]!==I||e[80]!==J?(k=s.jsx(de,{size:"lg",isOpen:n,setIsOpen:c,title:J,children:I}),e[77]=n,e[78]=c,e[79]=I,e[80]=J,e[81]=k):k=e[81],k}export{Ie as S};
