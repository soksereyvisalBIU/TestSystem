import{c as Z,a as K,j as t}from"./app-C4-wZLjv.js";import{z as ee}from"./index-pPUi9S1_.js";import{M as te}from"./modal-yih3Eojr.js";import{B as W}from"./button-BtXHUDlw.js";import{I as se}from"./input-CvWwLIjv.js";import{L as X}from"./label-BeNpEvcw.js";import{S as re,a as ie,b as le,c as ae,d as a}from"./select-C_dtcICN.js";import oe from"./FileUploadForm-DmIq5c93.js";import ne from"./FillBlankForm-Bj-B3i1h.js";import me from"./MatchingForm-CYA4JmEt.js";import ce from"./MultipleChoiceForm-Ds_KcU8l.js";import de from"./OrderingForm-BmD9zHZl.js";import pe from"./ShortAnswerForm-Ccec-Rk6.js";import fe from"./TrueFalseForm-CLwDodnz.js";import{C as xe}from"./circle-check-CE5iqhEP.js";import{T as ue}from"./type-iNUVBLyd.js";import{L as he}from"./layers-Cr9sWl68.js";import{C as ge}from"./circle-help-DD5Ejhof.js";import{c as be}from"./createLucideIcon-DDKIJ2e3.js";import{F as je}from"./file-Br47PucB.js";import{L as _e}from"./list-ordered-DUBYstHB.js";import{S as we}from"./settings-2-DUZge6eM.js";import{C as ye}from"./circle-plus-C83ja17N.js";import{T as ve}from"./trophy-CxKTdCWj.js";import{S as Ne}from"./save-YS-boTpX.js";import"./app-Ctpas7OY.js";import"./dialog-C5dD38AA.js";import"./index-DeD9CSgl.js";import"./index-CNKjpVcS.js";import"./index-Buz4j_7Y.js";import"./index-Xko6ReMJ.js";import"./index-C3tRsT71.js";import"./index-Bhes_7Zs.js";import"./index-cZrIM-8D.js";import"./index-ChzAp34M.js";import"./utils-CFcDjcb_.js";import"./x-cYyiHa3X.js";import"./index-CmRgzCPv.js";import"./index-CHXMgrNC.js";import"./index-BmIIwECa.js";import"./index-BthvL4JC.js";import"./index-CeYVXcUJ.js";import"./index-WR0EuoJH.js";import"./index-Clov3BKf.js";import"./chevron-up-C0eCS4i2.js";import"./check-Fwforxvc.js";import"./textarea-CnvsKu6z.js";import"./plus-BtJDo5Ri.js";import"./file-text-BlmxyJcG.js";import"./image-B55lGqBh.js";import"./images-CBFHfMIb.js";import"./hard-drive-EO9Vxhwo.js";import"./circle-alert-BQkIx_3U.js";import"./eye-CExwr-rA.js";import"./grip-vertical-DHmxRKH8.js";import"./trash-2-DrfR6DWM.js";import"./circle-CaXeVaRI.js";import"./info-BOi6THYg.js";import"./index-COEH0jJL.js";import"./index-C2fpaiMf.js";import"./with-selector-BUTWsrM7.js";import"./code-xml-BupXVzCv.js";import"./list-Cay255ng.js";import"./sparkles-Dy7xQZPs.js";import"./circle-x-C35IsA1L.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],ke=be("AlignLeft",Se);function Ot(k){const e=Z.c(68),{assessmentId:D,question:s,isOpen:o,setIsOpen:H,onClose:n,onSave:U}=k,[i,C]=K.useState(s?.type||"true_false");let F;e[0]!==s?(F=s||{},e[0]=s,e[1]=F):F=e[1];const[r,S]=K.useState(F);let q;e[2]!==s?(q=()=>{s?(C(s.type||"true_false"),S({...s,media:s.media||[],max_file_size:s.max_file_size||10,accepted_file_types:s.accepted_file_types||"image",allow_file_upload:s.allow_file_upload??s.type==="fileupload"})):(C("true_false"),S({point:1,question:"",answer:"",media:[],max_file_size:10,accepted_file_types:"image",allow_file_upload:!1}))},e[2]=s,e[3]=q):q=e[3];let A;e[4]!==o||e[5]!==s?(A=[s,o],e[4]=o,e[5]=s,e[6]=A):A=e[6],K.useEffect(q,A);let M;e[7]!==D||e[8]!==r||e[9]!==n||e[10]!==U||e[11]!==s||e[12]!==i?(M=()=>{let l="";if(!r.question||r.question.trim()==="")l="Question text is required.";else e:switch(i){case"true_false":case"fill_blank":case"short_answer":{(!r.answer||r.answer.toString().trim()==="")&&(l="A valid answer is required.");break e}case"multiple_choice":{!r.options||r.options.length<2?l="At least 2 options are required.":(r.answer===void 0||r.answer===null)&&(l="Please select the correct answer.");break e}case"matching":{(!r.answer||r.answer.length===0)&&(l="At least 1 matching pair is required.");break e}case"ordering":{(!r.items||r.items.length<2)&&(l="At least 2 items are required to set an order.");break e}case"fileupload":r.accepted_file_types||(l="Please specify allowed file formats.")}if(l){ee.error(l);return}U({...r,type:i,assessment_id:D,point:r.point||1,allow_file_upload:i==="fileupload"}),s||(S({}),C("true_false")),n()},e[7]=D,e[8]=r,e[9]=n,e[10]=U,e[11]=s,e[12]=i,e[13]=M):M=e[13];const R=M;let T;e[14]===Symbol.for("react.memo_cache_sentinel")?(T={true_false:fe,fill_blank:ne,multiple_choice:ce,matching:me,short_answer:pe,ordering:de,fileupload:oe},e[14]=T):T=e[14];const L=T[i];let m;e[15]!==s?(m=t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10 text-primary",children:s?t.jsx(we,{className:"h-5 w-5"}):t.jsx(ye,{className:"h-5 w-5"})}),e[15]=s,e[16]=m):m=e[16];const V=s?"Edit Question":"Create Question";let c;e[17]!==V?(c=t.jsx("span",{className:"text-sm font-bold leading-none text-title",children:V}),e[17]=V,e[18]=c):c=e[18];const $=s?`ID: #${s.id}`:"Drafting new assessment item";let d;e[19]!==$?(d=t.jsx("span",{className:"text-[10px] text-description font-medium",children:$}),e[19]=$,e[20]=d):d=e[20];let p;e[21]!==d||e[22]!==c?(p=t.jsxs("div",{className:"flex flex-col",children:[c,d]}),e[21]=d,e[22]=c,e[23]=p):p=e[23];let f;e[24]!==p||e[25]!==m?(f=t.jsxs("div",{className:"flex items-center gap-2",children:[m,p]}),e[24]=p,e[25]=m,e[26]=f):f=e[26];let I;e[27]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx(X,{className:"ml-1 text-[11px] font-bold tracking-widest text-description uppercase",children:"Question Format"}),e[27]=I):I=e[27];let x;e[28]!==s||e[29]!==i?(x=t.jsxs("div",{className:"space-y-2 md:col-span-8",children:[I,s?t.jsxs("div",{className:"flex h-11 items-center gap-3 rounded-lg border border-border bg-background px-4 font-semibold text-subtitle shadow-sm ring-1 ring-border/50",children:[t.jsx("div",{className:"h-2 w-2 rounded-full bg-primary animate-pulse"}),i.split("_").map(Ce).join(" ")]}):t.jsxs(re,{value:i,onValueChange:C,children:[t.jsx(ie,{className:"h-11 border-input bg-background text-body shadow-sm ring-offset-0 focus:ring-2 focus:ring-primary/20",children:t.jsx(le,{placeholder:"Select type"})}),t.jsxs(ae,{className:"rounded-xl border-border bg-popover shadow-xl",children:[t.jsx(a,{value:"true_false",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xe,{className:"h-4 w-4 text-blue-500"})," True / False"]})}),t.jsx(a,{value:"fill_blank",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ue,{className:"h-4 w-4 text-success"})," Fill in the Blank"]})}),t.jsx(a,{value:"multiple_choice",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(he,{className:"h-4 w-4 text-primary"})," Multiple Choice"]})}),t.jsx(a,{value:"matching",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ge,{className:"h-4 w-4 text-orange-500"})," Matching"]})}),t.jsx(a,{value:"short_answer",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ke,{className:"h-4 w-4 text-subtitle"})," Short Answer"]})}),t.jsx(a,{value:"fileupload",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(je,{className:"h-4 w-4 text-yellow-500"})," File Upload"]})}),t.jsx(a,{value:"ordering",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_e,{className:"h-4 w-4 text-success"})," Ordering"]})})]})]})]}),e[28]=s,e[29]=i,e[30]=x):x=e[30];let z;e[31]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(X,{className:"ml-1 text-[11px] font-bold tracking-widest text-description uppercase",children:"Points"}),e[31]=z):z=e[31];let Q;e[32]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(ve,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-description/50 transition-colors group-focus-within:text-primary"}),e[32]=Q):Q=e[32];const G=r.point||"";let B;e[33]===Symbol.for("react.memo_cache_sentinel")?(B=l=>S(Y=>({...Y,point:parseFloat(l.target.value)})),e[33]=B):B=e[33];let u;e[34]!==G?(u=t.jsxs("div",{className:"space-y-2 md:col-span-4",children:[z,t.jsxs("div",{className:"group relative",children:[Q,t.jsx(se,{type:"number",min:0,step:.5,className:"h-11 border-input bg-background text-body pl-10 shadow-sm focus:ring-2 focus:ring-primary/20",value:G,placeholder:"1.0",onChange:B})]})]}),e[34]=G,e[35]=u):u=e[35];let h;e[36]!==x||e[37]!==u?(h=t.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-2xl border border-border bg-muted/30 p-5 shadow-sm md:grid-cols-12",children:[x,u]}),e[36]=x,e[37]=u,e[38]=h):h=e[38];let E;e[39]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-6 w-1 rounded-full bg-primary"}),t.jsx("h3",{className:"text-sm font-bold tracking-tight text-title uppercase",children:"Builder Tool"})]}),e[39]=E):E=e[39];let g;e[40]!==i?(g=i==="fileupload"&&t.jsx("span",{className:"text-[10px] font-bold text-amber-600 bg-amber-500/10 px-2 py-0.5 rounded border border-amber-500/20 uppercase",children:"Reference Assets Supported"}),e[40]=i,e[41]=g):g=e[41];let b;e[42]!==g?(b=t.jsxs("div",{className:"px-5 pt-4 flex items-center justify-between",children:[E,g]}),e[42]=g,e[43]=b):b=e[43];let j;e[44]!==L||e[45]!==r?(j=t.jsx("div",{className:"p-5 animate-in duration-500 fade-in slide-in-from-bottom-3",children:L?t.jsx(L,{data:r,onChange:S}):t.jsx("div",{className:"flex h-40 items-center justify-center rounded-xl border-2 border-dashed border-border/50 bg-muted/10",children:t.jsx("p",{className:"text-sm text-description font-medium",children:"Select a question type to begin construction"})})}),e[44]=L,e[45]=r,e[46]=j):j=e[46];let _;e[47]!==b||e[48]!==j?(_=t.jsxs("div",{className:"relative min-h-[350px] rounded-2xl border border-border bg-card p-1 shadow-sm transition-all duration-300",children:[b,j]}),e[47]=b,e[48]=j,e[49]=_):_=e[49];let w;e[50]!==n?(w=t.jsx(W,{variant:"ghost",onClick:n,className:"font-bold text-xs uppercase tracking-widest text-description hover:bg-background hover:text-destructive transition-all",children:"Discard Changes"}),e[50]=n,e[51]=w):w=e[51];let O;e[52]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(Ne,{className:"mr-2 h-4 w-4"}),e[52]=O):O=e[52];const J=s?"Save Updates":"Publish Question";let y;e[53]!==R||e[54]!==J?(y=t.jsxs(W,{onClick:R,className:"h-12 min-w-[160px] rounded-xl bg-primary font-bold text-xs uppercase tracking-widest text-primary-foreground shadow-lg shadow-primary/20 transition-all hover:scale-[1.02] hover:bg-primary/90 active:scale-[0.98]",children:[O,J]}),e[53]=R,e[54]=J,e[55]=y):y=e[55];let v;e[56]!==w||e[57]!==y?(v=t.jsxs("div",{className:"flex items-center justify-between border-t border-border bg-muted/20 -mx-6 -mb-6 px-6 py-5 rounded-b-3xl",children:[w,y]}),e[56]=w,e[57]=y,e[58]=v):v=e[58];let N;e[59]!==h||e[60]!==_||e[61]!==v?(N=t.jsxs("div",{className:"flex flex-col space-y-6",children:[h,_,v]}),e[59]=h,e[60]=_,e[61]=v,e[62]=N):N=e[62];let P;return e[63]!==o||e[64]!==H||e[65]!==f||e[66]!==N?(P=t.jsx(te,{isOpen:o,setIsOpen:H,size:"lg",title:f,children:N}),e[63]=o,e[64]=H,e[65]=f,e[66]=N,e[67]=P):P=e[67],P}function Ce(k){return k.charAt(0).toUpperCase()+k.slice(1)}export{Ot as default};
