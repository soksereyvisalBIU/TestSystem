import{c as Ne,a as h,j as t,H as _e,L as xe,m as ke}from"./app-DbC9swOp.js";import{A as Se}from"./app-layout-DB38e1tJ.js";import{d as p}from"./dayjs.min-B7ZjrZ6U.js";import{d as Ae}from"./duration-DE9mxQys.js";import{u as Re,t as Ie,r as Pe}from"./utc-DKG2NF44.js";import{s as pe}from"./index-ikzcNs2d.js";import{c as fe}from"./confetti.module-Cx83yTHA.js";import"./app-B-j88FTB.js";import"./index-BLROG9a-.js";import"./index-OyaHfcK1.js";import"./index-DrZ1WBgl.js";import"./index-CHXMgrNC.js";import"./utils-CFcDjcb_.js";import"./button-B0cnHsLL.js";import"./dialog-XIh-d8In.js";import"./index-GNnbXVu0.js";import"./index-DfdQaTH4.js";import"./index-DUVlDvZK.js";import"./index-DpP96dE-.js";import"./index-CGmkGWeF.js";import"./index-C5noA0MZ.js";import"./index-CFZJ_iCf.js";import"./x-BcxDNo4d.js";import"./createLucideIcon-CwNQQ2Lr.js";import"./tooltip-BjGVwsVz.js";import"./index-DKfa_JjE.js";import"./index-BI2ZCWKw.js";import"./index-BSo9miKG.js";import"./index-vo4ULvVg.js";import"./index-BF2HzXLa.js";import"./avatar-BQA4Z3p_.js";import"./index-CoyZhxZx.js";import"./index-BZB35nAZ.js";import"./index-CMWG4mbA.js";import"./command-RsIjOFqg.js";import"./search-i8E80oUt.js";import"./app-logo-icon-CI-oZLFk.js";import"./layout-grid-DjmK7l_J.js";import"./users-Ba4Nng5e.js";import"./settings-2-DvxrLHlG.js";import"./cpu-H_bfj-VP.js";import"./book-open-DpTjyKmw.js";import"./chevron-right-BLPhb5io.js";import"./appearance-tabs-header-B5XtEuQ0.js";import"./sun-D2aYdR0-.js";p.extend(Re);p.extend(Ie);p.extend(Pe);p.extend(Ae);function Rt(o){const e=Ne.c(98),{assessment:s,class_id:b,subject_id:v,studentAssessment:B,studentAssessmentAttempt:n}=o,[x,se]=h.useState(null),[D,ue]=h.useState(0),[ge,he]=h.useState(!1);let W,F;e[0]===Symbol.for("react.memo_cache_sentinel")?(W=()=>{Me().then(i=>se(p.utc(i.now).tz("Asia/Phnom_Penh"))).catch(()=>se(p().tz("Asia/Phnom_Penh"))),he(!0)},F=[],e[0]=W,e[1]=F):(W=e[0],F=e[1]),h.useEffect(W,F);let U,H;e[2]!==x?(U=()=>{if(!x)return;const r=setInterval(()=>se(ze),1e3);return()=>clearInterval(r)},H=[x],e[2]=x,e[3]=U,e[4]=H):(U=e[3],H=e[4]),h.useEffect(U,H);let re;e:{if(!s||!x){let g;e[5]!==x?(g={start:null,end:null,now:x,isWithinTime:!1,isBeforeStart:!1,countdown:null},e[5]=x,e[6]=g):g=e[6],re=g;break e}let r,i,c,d,l,m;if(e[7]!==s.end_time||e[8]!==s.start_time||e[9]!==x){m=p.utc(s.start_time).tz("Asia/Phnom_Penh"),i=p.utc(s.end_time).tz("Asia/Phnom_Penh"),l=x,d=l.isAfter(m)&&l.isBefore(i),c=l.isBefore(m);const g=c?m.diff(l):d?i.diff(l):0;if(r=null,g>0){const te=p.duration(g);r={days:Math.floor(te.asDays()),hours:te.hours(),minutes:te.minutes(),seconds:te.seconds()}}e[7]=s.end_time,e[8]=s.start_time,e[9]=x,e[10]=r,e[11]=i,e[12]=c,e[13]=d,e[14]=l,e[15]=m}else r=e[10],i=e[11],c=e[12],d=e[13],l=e[14],m=e[15];let ee;e[16]!==r||e[17]!==i||e[18]!==c||e[19]!==d||e[20]!==l||e[21]!==m?(ee={start:m,end:i,now:l,isWithinTime:d,isBeforeStart:c,countdown:r},e[16]=r,e[17]=i,e[18]=c,e[19]=d,e[20]=l,e[21]=m,e[22]=ee):ee=e[22],re=ee}const{start:ie,isWithinTime:be,isBeforeStart:y,countdown:O}=re,ae=B?.attempted_amount??0,V=s.max_attempts??0,ve=n?.status==="completed",ye=B?.score!==null&&B?.score!==void 0,a=ve||ye&&ae>0,je=V===0||ae<V,q=n&&n.status!=="completed",ne=!a&&be&&(je||q),f=n?.score??B?.score??0,G=s.max_score??100,u=Math.round(f/G*100)>=50;let J,K;e[23]!==f||e[24]!==a?(J=()=>{if(a){let r=0;const i=f;if(r===i)return;const c=1500/i*1.5,d=setInterval(()=>{r=r+1,ue(r),r===i&&clearInterval(d)},Math.max(c,10));return()=>clearInterval(d)}},K=[a,f],e[23]=f,e[24]=a,e[25]=J,e[26]=K):(J=e[25],K=e[26]),h.useEffect(J,K);let Q,X;e[27]!==u||e[28]!==a?(Q=()=>{if(a&&u){const r=Date.now()+3e3,i={startVelocity:30,spread:360,ticks:60,zIndex:0},c=Te,d=setInterval(function(){const l=r-Date.now();if(l<=0)return clearInterval(d);const m=50*(l/3e3);fe({...i,particleCount:m,origin:{x:c(.1,.3),y:Math.random()-.2}}),fe({...i,particleCount:m,origin:{x:c(.7,.9),y:Math.random()-.2}})},250);return()=>clearInterval(d)}},X=[a,u],e[27]=u,e[28]=a,e[29]=Q,e[30]=X):(Q=e[29],X=e[30]),h.useEffect(Q,X);let Y;e[31]===Symbol.for("react.memo_cache_sentinel")?(Y=[{title:"Class",href:"#"},{title:"Subjects",href:"#"},{title:"Assessments",href:"#"}],e[31]=Y):Y=e[31];const we=Y;let j;e[32]!==s.title?(j=t.jsx(_e,{title:s.title}),e[32]=s.title,e[33]=j):j=e[33];const le=`asssessment-card-${s.id}`,oe=`flex flex-col items-center justify-center py-6 transition-all duration-700 ease-out ${ge?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`;let w;e[34]!==s.title?(w=t.jsx("h1",{className:"mb-2 text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl dark:text-white",children:s.title}),e[34]=s.title,e[35]=w):w=e[35];let N;e[36]!==s.description?(N=t.jsx("p",{className:"text-lg text-gray-500 dark:text-gray-400",children:s.description}),e[36]=s.description,e[37]=N):N=e[37];let _;e[38]!==w||e[39]!==N?(_=t.jsxs("div",{className:"bg-gray-50/50 p-8 text-center dark:bg-gray-800/50",children:[w,N]}),e[38]=w,e[39]=N,e[40]=_):_=e[40];let k;e[41]!==D||e[42]!==O||e[43]!==y||e[44]!==u||e[45]!==G||e[46]!==f||e[47]!==a||e[48]!==ie||e[49]!==n?(k=a?t.jsx("div",{className:"perspective-1000 mt-2 transform",children:t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-50 to-white py-12 text-center shadow-inner ring-1 ring-indigo-100 transition-all duration-500 hover:shadow-lg dark:from-gray-700 dark:to-gray-800 dark:ring-gray-600",children:[t.jsx("div",{className:"absolute -top-10 -right-10 h-40 w-40 animate-pulse rounded-full bg-indigo-500/10 blur-3xl"}),t.jsx("div",{className:"absolute -bottom-10 -left-10 h-40 w-40 animate-pulse rounded-full bg-blue-500/10 blur-3xl delay-700"}),t.jsx("p",{className:"text-sm font-bold tracking-widest text-gray-500 uppercase dark:text-gray-400",children:"Assessment Completed"}),t.jsxs("div",{className:"mt-6 flex flex-col items-center justify-center",children:[t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:`text-8xl font-black tracking-tighter sm:text-9xl ${u?"bg-gradient-to-r from-green-500 to-emerald-700 bg-clip-text text-transparent":"text-red-500"} px-3`,children:D}),t.jsx("span",{className:"absolute top-4 -right-6 text-2xl font-bold text-gray-400",children:"%"})]}),t.jsx("div",{className:"mt-2 flex items-center space-x-2 text-gray-400",children:t.jsxs("span",{className:"text-lg font-medium",children:["Final Score (",f,"/",G,")"]})})]}),t.jsx("div",{className:`mt-8 flex justify-center transition-all duration-700 ${D===f?"scale-100 opacity-100":"scale-50 opacity-0"}`,children:t.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-6 py-2 text-base font-bold shadow-sm ${u?"bg-green-100 text-green-700 ring-2 ring-green-500/20 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-700 ring-2 ring-red-500/20 dark:bg-red-900/30 dark:text-red-300"}`,children:u?t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"PASSED"]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"NEEDS IMPROVEMENT"]})})}),n?.completed_at&&t.jsxs("p",{className:"mt-6 text-xs text-gray-400",children:["Submitted"," ",p(n.completed_at).fromNow()]})]})}):O&&ie&&t.jsxs("div",{className:"mt-6 rounded-xl border-2 border-indigo-50 bg-indigo-50/50 p-6 text-center dark:border-indigo-900/30 dark:bg-indigo-900/20",children:[t.jsx("p",{className:"text-sm font-bold tracking-wider text-indigo-700 uppercase dark:text-indigo-300",children:y?"Assessment Starts In":"Time Remaining"}),t.jsx("div",{className:"mt-4 flex justify-center gap-4",children:["days","hours","minutes","seconds"].map(r=>{const i=O[r];return r==="days"&&i===0?null:t.jsxs("div",{className:"flex flex-col items-center rounded-lg bg-white p-3 shadow-sm dark:bg-gray-700",children:[t.jsx("span",{className:"text-3xl font-black text-gray-800 dark:text-white",children:String(i).padStart(2,"0")}),t.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:r})]},r)})})]}),e[41]=D,e[42]=O,e[43]=y,e[44]=u,e[45]=G,e[46]=f,e[47]=a,e[48]=ie,e[49]=n,e[50]=k):k=e[50];let S;e[51]!==s.type?(S=s.type.toUpperCase(),e[51]=s.type,e[52]=S):S=e[52];let A;e[53]!==S?(A={label:"Type",value:S},e[53]=S,e[54]=A):A=e[54];const de=`${s.duration}m`;let R;e[55]!==de?(R={label:"Duration",value:de},e[55]=de,e[56]=R):R=e[56];const ce=`${ae}/${V===0?"âˆž":V}`;let I;e[57]!==ce?(I={label:"Attempts",value:ce},e[57]=ce,e[58]=I):I=e[58];const me=a?"Done":"Active";let P;e[59]!==me?(P={label:"Status",value:me},e[59]=me,e[60]=P):P=e[60];let E;e[61]!==A||e[62]!==R||e[63]!==I||e[64]!==P?(E=t.jsx("div",{className:"mt-8 grid grid-cols-2 gap-4 text-center sm:grid-cols-4",children:[A,R,I,P].map(Ee)}),e[61]=A,e[62]=R,e[63]=I,e[64]=P,e[65]=E):E=e[65];let T;e[66]!==s.id||e[67]!==ne||e[68]!==b||e[69]!==y||e[70]!==q||e[71]!==a||e[72]!==n?.id||e[73]!==v?(T=ne?t.jsx(xe,{href:pe("student.classes.subjects.assessments.request",{class_id:b,subject_id:v,assessment_id:s.id,student_assessment_attempt_id:n?.id??null}),method:"post",as:"button",className:"group relative w-full overflow-hidden rounded-xl bg-indigo-600 py-4 text-lg font-bold text-white shadow-lg transition-all duration-300 hover:scale-[1.02] hover:bg-indigo-700 hover:shadow-indigo-500/40",children:t.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:q?"Resume Assessment":"Start Assessment"})}):a?null:t.jsx("div",{className:"rounded-xl bg-red-50 p-4 text-center text-red-600 dark:bg-red-900/20 dark:text-red-400",children:y?"Starts Soon":"Unavailable"}),e[66]=s.id,e[67]=ne,e[68]=b,e[69]=y,e[70]=q,e[71]=a,e[72]=n?.id,e[73]=v,e[74]=T):T=e[74];let z;e[75]!==s.id||e[76]!==b||e[77]!==a||e[78]!==n||e[79]!==v?(z=n?.id&&t.jsx(xe,{href:pe("student.classes.subjects.assessments.attempt.review",{class_id:b,subject_id:v,assessment_id:s.id,student_assessment_attempt_id:n.id}),className:`flex w-full items-center justify-center rounded-xl border-2 border-gray-100 py-3 font-semibold text-gray-600 transition-all hover:border-indigo-100 hover:bg-indigo-50 hover:text-indigo-600 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 ${a?"mt-2":""}`,children:"Review Answers"}),e[75]=s.id,e[76]=b,e[77]=a,e[78]=n,e[79]=v,e[80]=z):z=e[80];let M;e[81]!==T||e[82]!==z?(M=t.jsxs("div",{className:"mt-8 flex flex-col gap-3",children:[T,z]}),e[81]=T,e[82]=z,e[83]=M):M=e[83];let C;e[84]!==k||e[85]!==E||e[86]!==M?(C=t.jsxs("div",{className:"px-8 pb-8",children:[k,E,M]}),e[84]=k,e[85]=E,e[86]=M,e[87]=C):C=e[87];let $;e[88]!==_||e[89]!==C?($=t.jsxs("div",{className:"relative flex w-full max-w-2xl flex-col overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-2xl dark:border-gray-700 dark:bg-gray-800",children:[_,C]}),e[88]=_,e[89]=C,e[90]=$):$=e[90];let L;e[91]!==le||e[92]!==oe||e[93]!==$?(L=t.jsx(ke.div,{layoutId:le,className:oe,children:$}),e[91]=le,e[92]=oe,e[93]=$,e[94]=L):L=e[94];let Z;return e[95]!==j||e[96]!==L?(Z=t.jsxs(Se,{breadcrumbs:we,children:[j,L]}),e[95]=j,e[96]=L,e[97]=Z):Z=e[97],Z}function Ee(o,e){return t.jsxs("div",{className:"rounded-lg bg-gray-50 p-3 dark:bg-gray-700/30",children:[t.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:o.label}),t.jsx("div",{className:"font-bold text-gray-700 dark:text-gray-200",children:o.value})]},e)}function Te(o,e){return Math.random()*(e-o)+o}function ze(o){return o&&o.add(1,"second")}function Me(){return new Promise(Ce)}function Ce(o){setTimeout(()=>o({now:p.utc().toISOString()}),100)}export{Rt as default};
