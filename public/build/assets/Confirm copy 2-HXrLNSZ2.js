import{c as $,r as A,j as t,H as J,A as K,m as Z,L as B}from"./app-DOexATz8.js";import{A as Q}from"./AssessmentResultCard-D7C0zdYz.js";import{A as ee}from"./AssessmentSkeleton-DIBBCAWp.js";import{A as q}from"./app-layout-CQOHcJhl.js";import{d as f}from"./dayjs.min-CnGYDrgm.js";import{d as te}from"./duration-CMFRnr51.js";import{u as se,t as re,r as ae}from"./utc-2ZrOg4W8.js";import{s as X}from"./index-ikzcNs2d.js";import{P as le}from"./play-DzHkeGci.js";import{C as ie}from"./circle-plus-B2T26ofK.js";import{A as oe}from"./arrow-right-Cr5VBfnV.js";import{C as ne}from"./circle-check-BbXVY_J9.js";import{C as z}from"./clock-JNa168ul.js";import{C as me}from"./circle-alert-_35u1DpG.js";import{F as ce}from"./file-check-6yq4XLlD.js";import"./app-Dkd-uU77.js";import"./confetti.module-Cx83yTHA.js";import"./use-transform-M7KT3T3P.js";import"./index-BCjrxXRD.js";import"./index-DQ5CcXw7.js";import"./index-Dghi0PCu.js";import"./index-CHXMgrNC.js";import"./utils-CFcDjcb_.js";import"./button-BRVN6i6H.js";import"./dialog-TFrJjmZh.js";import"./index-BZcpqnGn.js";import"./index-DM2N5xoF.js";import"./index-BiXTY-N1.js";import"./index-BEPutMgU.js";import"./index-CsaJF3T3.js";import"./index-CbEB6B2s.js";import"./index-D8NCBvGj.js";import"./x-xRkXIo8D.js";import"./createLucideIcon-j6D0D3Y_.js";import"./tooltip-ByYNg7VM.js";import"./index-DI0Uf7dS.js";import"./index-CPEYA-OZ.js";import"./index-C8DTQ8L6.js";import"./index-D2V0qVjz.js";import"./index-Z9JsAk8n.js";import"./avatar-_pMFpJ1a.js";import"./index-C5FbGKEL.js";import"./index-BZB35nAZ.js";import"./index-CMWG4mbA.js";import"./command-BJUssI3G.js";import"./search-BJrQLS36.js";import"./app-logo-icon-B6GRV3HK.js";import"./layout-grid-BfACZU2C.js";import"./users-YRzjUlzr.js";import"./settings-2-CHSmb4cp.js";import"./cpu-Dh4fUxB8.js";import"./book-open--LA4IL-m.js";import"./chevron-right-CqdRtJ2F.js";import"./appearance-tabs-header-CF3ajYXV.js";import"./sun-BG-XGb8r.js";f.extend(se);f.extend(re);f.extend(ae);f.extend(te);const de=A.memo(m=>{const e=$.c(8),{title:s,description:o}=m;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-white shadow-md ring-1 ring-gray-100 dark:bg-gray-700 dark:ring-gray-600",children:t.jsx(ce,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),e[0]=a):a=e[0];let l;e[1]!==s?(l=t.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900 dark:text-white",children:s}),e[1]=s,e[2]=l):l=e[2];let r;e[3]!==o?(r=o&&t.jsx("p",{className:"mx-auto mt-3 max-w-lg text-base text-gray-500 dark:text-gray-400",children:o}),e[3]=o,e[4]=r):r=e[4];let i;return e[5]!==l||e[6]!==r?(i=t.jsxs("div",{className:"border-b border-gray-100 bg-gray-50/80 p-8 text-center backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/80",children:[a,l,r]}),e[5]=l,e[6]=r,e[7]=i):i=e[7],i}),Y=m=>{const e=$.c(8),{label:s,value:o,highlight:a}=m;let l;e[0]!==s?(l=t.jsx("span",{className:"mb-1 text-[10px] font-bold tracking-wider text-gray-400 uppercase",children:s}),e[0]=s,e[1]=l):l=e[1];const r=`text-sm font-bold ${a?"text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-gray-100"}`;let i;e[2]!==r||e[3]!==o?(i=t.jsx("span",{className:r,children:o}),e[2]=r,e[3]=o,e[4]=i):i=e[4];let c;return e[5]!==l||e[6]!==i?(c=t.jsxs("div",{className:"flex flex-col items-center justify-center rounded-xl bg-gray-50 p-4 dark:bg-gray-800/50",children:[l,i]}),e[5]=l,e[6]=i,e[7]=c):c=e[7],c},xe=A.memo(m=>{const e=$.c(11),{assessment:s,attemptsUsed:o,highlightAttempts:a}=m;let l;e[0]!==s.type?(l=t.jsx(Y,{label:"Format",value:s.type}),e[0]=s.type,e[1]=l):l=e[1];const r=`${s.duration} min`;let i;e[2]!==r?(i=t.jsx(Y,{label:"Duration",value:r}),e[2]=r,e[3]=i):i=e[3];const c=`${o} / ${s.max_attempts===0?"âˆž":s.max_attempts}`;let x;e[4]!==a||e[5]!==c?(x=t.jsx(Y,{label:"Attempts",value:c,highlight:a}),e[4]=a,e[5]=c,e[6]=x):x=e[6];let d;return e[7]!==l||e[8]!==i||e[9]!==x?(d=t.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-4 sm:grid-cols-3",children:[l,i,x]}),e[7]=l,e[8]=i,e[9]=x,e[10]=d):d=e[10],d}),W=A.memo(m=>{const e=$.c(27),{targetDate:s,onZero:o}=m,[a,l]=A.useState(null);let r,i;if(e[0]!==o||e[1]!==s?(r=()=>{const _=()=>{const w=f(s).diff(f());if(w<=0){l(f.duration(0)),o?.();return}l(f.duration(w))};_();const N=setInterval(_,1e3);return()=>clearInterval(N)},i=[s,o],e[0]=o,e[1]=s,e[2]=r,e[3]=i):(r=e[2],i=e[3]),A.useEffect(r,i),!a||a.asSeconds()<=0)return null;let c;e[4]!==a?(c=a.asDays(),e[4]=a,e[5]=c):c=e[5];const x=Math.floor(c);let d;e[6]!==x?(d={label:"Days",value:x},e[6]=x,e[7]=d):d=e[7];let u;e[8]!==a?(u=a.hours(),e[8]=a,e[9]=u):u=e[9];let n;e[10]!==u?(n={label:"Hrs",value:u},e[10]=u,e[11]=n):n=e[11];let p;e[12]!==a?(p=a.minutes(),e[12]=a,e[13]=p):p=e[13];let y;e[14]!==p?(y={label:"Min",value:p},e[14]=p,e[15]=y):y=e[15];let b;e[16]!==a?(b=a.seconds(),e[16]=a,e[17]=b):b=e[17];let h;e[18]!==b?(h={label:"Sec",value:b},e[18]=b,e[19]=h):h=e[19];let j;e[20]!==h||e[21]!==d||e[22]!==n||e[23]!==y?(j=[d,n,y,h],e[20]=h,e[21]=d,e[22]=n,e[23]=y,e[24]=j):j=e[24];const g=j;let v;return e[25]!==g?(v=t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"flex justify-center gap-3",children:g.map(ue)})}),e[25]=g,e[26]=v):v=e[26],v}),fe=(m,e,s,o)=>{if(!m)return"LOADING";const a=f(e.start_time),l=f(e.end_time),r=s?.attempted_amount??0,i=e.max_attempts,c=i===0||r<i;return o?.status==="draft"?"RESUME":m.isBefore(a)?"UPCOMING":m.isAfter(l)?"EXPIRED":c?"ACTIVE":o?.status==="submitted"&&o.score===void 0?"PENDING_GRADING":s?.status==="scored"||o?.status==="graded"?"GRADED":"NO_ATTEMPTS_LEFT"};function bt(m){const e=$.c(70),{assessment:s,class_id:o,subject_id:a,studentAssessment:l,studentAssessmentAttempt:r}=m,[i,c]=A.useState(null);let x,d;e[0]===Symbol.for("react.memo_cache_sentinel")?(x=()=>c(f()),d=[],e[0]=x,e[1]=d):(x=e[0],d=e[1]),A.useEffect(x,d);let u;e[2]!==s||e[3]!==i||e[4]!==l||e[5]!==r?(u=fe(i,s,l,r),e[2]=s,e[3]=i,e[4]=l,e[5]=r,e[6]=u):u=e[6];const n=u;let p;e[7]===Symbol.for("react.memo_cache_sentinel")?(p=()=>c(f()),e[7]=p):p=e[7];const y=p;if(!i){let M;e[8]===Symbol.for("react.memo_cache_sentinel")?(M=[{title:"Assessments",href:"#"}],e[8]=M):M=e[8];let k;return e[9]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(q,{breadcrumbs:M,children:t.jsx("div",{className:"flex min-h-[80vh] items-center justify-center p-4",children:t.jsx(ee,{})})}),e[9]=k):k=e[9],k}let b;e[10]!==s.end_time||e[11]!==s.max_score||e[12]!==s.start_time||e[13]!==n||e[14]!==l?.score||e[15]!==r?.completed_at||e[16]!==r?.score||e[17]!==r?.status?(b=()=>{switch(n){case"UPCOMING":return t.jsx(W,{targetDate:s.start_time,label:"Starts In",onZero:y});case"PENDING_GRADING":return t.jsxs("div",{className:"flex flex-col items-center rounded-2xl bg-amber-50 p-6 text-center ring-1 ring-amber-100 dark:bg-amber-900/10 dark:ring-amber-800",children:[t.jsx(z,{className:"mb-3 h-8 w-8 text-amber-600"}),t.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Submission Under Review"}),t.jsx("p",{className:"text-xs text-gray-500",children:"You have used all available attempts. Waiting for teacher grading."})]});case"GRADED":{const k=(r?.score??l?.score??0)/(s.max_score??100)*100;return t.jsx(Q,{score:k,maxScore:100,isPassing:k>=50,completedAt:r?.completed_at})}case"EXPIRED":return t.jsxs("div",{className:"flex flex-col items-center justify-center rounded-xl bg-gray-50 py-8 dark:bg-gray-800/50",children:[t.jsx(me,{className:"mb-2 h-8 w-8 text-gray-400"}),t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Deadline Passed"}),t.jsx("p",{className:"text-xs text-gray-500",children:"This assessment is no longer accepting submissions."})]});case"ACTIVE":case"RESUME":return t.jsxs(t.Fragment,{children:[r?.status==="submitted"&&t.jsxs(Z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex flex-col items-center rounded-2xl bg-amber-50 p-8 text-center ring-1 ring-amber-100 dark:bg-amber-900/10 dark:ring-amber-800",children:[t.jsx("div",{className:"mb-4 rounded-full bg-amber-100 p-3 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400",children:t.jsx(z,{className:"h-8 w-8"})}),t.jsx("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:"Submission Under Review"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your assessment has been submitted successfully. Scores will be available once the teacher completes grading."})]}),t.jsx(W,{targetDate:s.end_time,label:"Closing In",onZero:y})]});default:return null}},e[10]=s.end_time,e[11]=s.max_score,e[12]=s.start_time,e[13]=n,e[14]=l?.score,e[15]=r?.completed_at,e[16]=r?.score,e[17]=r?.status,e[18]=b):b=e[18];const h=b;let j;e[19]===Symbol.for("react.memo_cache_sentinel")?(j=[{title:"Assessments",href:"#"}],e[19]=j):j=e[19];let g;e[20]!==s.title?(g=t.jsx(J,{title:s.title}),e[20]=s.title,e[21]=g):g=e[21];let v,_;e[22]===Symbol.for("react.memo_cache_sentinel")?(v={opacity:0,y:20},_={opacity:1,y:0},e[22]=v,e[23]=_):(v=e[22],_=e[23]);let N;e[24]!==s.description||e[25]!==s.title?(N=t.jsx(de,{title:s.title,description:s.description}),e[24]=s.description,e[25]=s.title,e[26]=N):N=e[26];let w,F,L;e[27]===Symbol.for("react.memo_cache_sentinel")?(w={opacity:0},F={opacity:1},L={opacity:0},e[27]=w,e[28]=F,e[29]=L):(w=e[27],F=e[28],L=e[29]);let S;e[30]!==h?(S=h(),e[30]=h,e[31]=S):S=e[31];let E;e[32]!==n||e[33]!==S?(E=t.jsx(K,{mode:"wait",children:t.jsx(Z.div,{initial:w,animate:F,exit:L,children:S},n)}),e[32]=n,e[33]=S,e[34]=E):E=e[34];const O=l?.attempted_amount??0,V=n==="ACTIVE";let C;e[35]!==s||e[36]!==O||e[37]!==V?(C=t.jsx(xe,{assessment:s,attemptsUsed:O,highlightAttempts:V}),e[35]=s,e[36]=O,e[37]=V,e[38]=C):C=e[38];let D;e[39]!==s.id||e[40]!==o||e[41]!==n||e[42]!==r?.id||e[43]!==r?.status||e[44]!==a?(D=(n==="ACTIVE"||n==="RESUME")&&t.jsx(B,{href:X("student.classes.subjects.assessments.request",{class_id:o,subject_id:a,assessment_id:s.id,student_assessment_attempt_id:r?.id??null}),method:"post",as:"button",className:`group flex w-full items-center justify-center gap-2 rounded-2xl py-4 text-lg font-bold transition-all hover:shadow-lg ${n==="RESUME"?"bg-blue-600 text-white hover:bg-blue-700":r?.status==="submitted"?"border-2 border-blue-600 bg-transparent text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/10":"bg-blue-600 text-white hover:bg-blue-700"}`,children:n==="RESUME"?t.jsxs(t.Fragment,{children:[t.jsx(le,{className:"h-5 w-5 fill-current"}),"Resume Attempt"]}):r?.status==="submitted"?t.jsxs(t.Fragment,{children:["Start New Attempt",t.jsx(ie,{className:"h-5 w-5 transition-transform group-hover:rotate-90"})]}):t.jsxs(t.Fragment,{children:["Start Assessment",t.jsx(oe,{className:"h-5 w-5 transition-transform group-hover:translate-x-1"})]})}),e[39]=s.id,e[40]=o,e[41]=n,e[42]=r?.id,e[43]=r?.status,e[44]=a,e[45]=D):D=e[45];let R;e[46]!==s.id||e[47]!==o||e[48]!==n||e[49]!==r||e[50]!==a?(R=n==="GRADED"&&r?.id&&t.jsxs(B,{href:X("student.classes.subjects.assessments.attempt.review",{class_id:o,subject_id:a,assessment_id:s.id,student_assessment_attempt_id:r.id}),className:"flex w-full items-center justify-center gap-2 rounded-2xl border border-gray-200 bg-white py-4 font-bold text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300",children:[t.jsx(ne,{className:"h-5 w-5"})," ","Review Answers"]}),e[46]=s.id,e[47]=o,e[48]=n,e[49]=r,e[50]=a,e[51]=R):R=e[51];let I;e[52]!==o?(I=X("student.classes.show",o),e[52]=o,e[53]=I):I=e[53];let P;e[54]!==I?(P=t.jsx("div",{className:"text-center",children:t.jsx(B,{href:I,className:"text-sm font-medium text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"Back to Classroom"})}),e[54]=I,e[55]=P):P=e[55];let G;e[56]!==D||e[57]!==R||e[58]!==P?(G=t.jsxs("div",{className:"mt-10 space-y-4",children:[D,R,P]}),e[56]=D,e[57]=R,e[58]=P,e[59]=G):G=e[59];let T;e[60]!==E||e[61]!==C||e[62]!==G?(T=t.jsxs("div",{className:"p-6 sm:p-10",children:[E,C,G]}),e[60]=E,e[61]=C,e[62]=G,e[63]=T):T=e[63];let U;e[64]!==N||e[65]!==T?(U=t.jsx("div",{className:"flex min-h-[85vh] flex-col items-center justify-center p-4 md:p-8",children:t.jsx(Z.div,{initial:v,animate:_,className:"w-full max-w-2xl",children:t.jsxs("div",{className:"overflow-hidden rounded-3xl border border-gray-200 bg-white shadow-2xl dark:border-gray-700 dark:bg-gray-800",children:[N,T]})})}),e[64]=N,e[65]=T,e[66]=U):U=e[66];let H;return e[67]!==U||e[68]!==g?(H=t.jsxs(q,{breadcrumbs:j,children:[g,U]}),e[67]=U,e[68]=g,e[69]=H):H=e[69],H}function ue(m){return(m.label!=="Days"||m.value>0)&&t.jsxs("div",{className:"flex min-w-[64px] flex-col items-center rounded-xl border border-gray-100 bg-white p-2 shadow-sm dark:border-gray-700 dark:bg-gray-800",children:[t.jsx("span",{className:"font-mono text-xl font-bold text-gray-900 dark:text-white",children:String(m.value).padStart(2,"0")}),t.jsx("span",{className:"text-[9px] font-bold text-gray-400 uppercase",children:m.label})]},m.label)}export{bt as default};
