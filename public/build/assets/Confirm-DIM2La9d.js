import{j as e,H as a,r as d,L as A}from"./app-DOexATz8.js";import{B as l}from"./button-BRVN6i6H.js";import{A as c}from"./app-layout-CQOHcJhl.js";import{d as r}from"./dayjs.min-CnGYDrgm.js";import{u as y,t as Y,r as g}from"./utc-2ZrOg4W8.js";import{s as w}from"./index-ikzcNs2d.js";import"./app-Dkd-uU77.js";import"./index-DQ5CcXw7.js";import"./index-Dghi0PCu.js";import"./index-CHXMgrNC.js";import"./utils-CFcDjcb_.js";import"./index-BCjrxXRD.js";import"./dialog-TFrJjmZh.js";import"./index-BZcpqnGn.js";import"./index-DM2N5xoF.js";import"./index-BiXTY-N1.js";import"./index-BEPutMgU.js";import"./index-CsaJF3T3.js";import"./index-CbEB6B2s.js";import"./index-D8NCBvGj.js";import"./x-xRkXIo8D.js";import"./createLucideIcon-j6D0D3Y_.js";import"./tooltip-ByYNg7VM.js";import"./index-DI0Uf7dS.js";import"./index-CPEYA-OZ.js";import"./index-C8DTQ8L6.js";import"./index-D2V0qVjz.js";import"./index-Z9JsAk8n.js";import"./avatar-_pMFpJ1a.js";import"./index-C5FbGKEL.js";import"./index-BZB35nAZ.js";import"./index-CMWG4mbA.js";import"./command-BJUssI3G.js";import"./search-BJrQLS36.js";import"./app-logo-icon-B6GRV3HK.js";import"./layout-grid-BfACZU2C.js";import"./users-YRzjUlzr.js";import"./settings-2-CHSmb4cp.js";import"./cpu-Dh4fUxB8.js";import"./book-open--LA4IL-m.js";import"./chevron-right-CqdRtJ2F.js";import"./appearance-tabs-header-CF3ajYXV.js";import"./sun-BG-XGb8r.js";r.extend(y);r.extend(Y);r.extend(g);const p=[{title:"Dashboard",href:"/"}];function ue({assessment:t,class_id:x,subject_id:h}){if(!t)return e.jsxs(c,{breadcrumbs:p,children:[e.jsx(a,{title:"Assessment"}),e.jsx("div",{className:"flex flex-1 items-center justify-center",children:e.jsx("p",{className:"text-center text-red-600",children:"Assessment not found."})})]});console.log(t);const[m,f]=d.useState(null);if(d.useEffect(()=>{fetch("/api/server-time").then(n=>n.json()).then(n=>{f(r.utc(n.now).tz("Asia/Phnom_Penh"))})},[]),!m)return;console.log("Server Time:",m.format());const i=r.utc(t.start_time).tz("Asia/Phnom_Penh"),o=r.utc(t.end_time).tz("Asia/Phnom_Penh"),s=m,u=s.isAfter(i)&&s.isBefore(o),j=s.isBefore(i),N=s.isAfter(o),b=t.max_attempts??3,v={quiz:"Quiz",exam:"Exam",homework:"Homework",midterm:"Midterm",final:"Final"}[t.type]||"Assessment";return e.jsxs(c,{breadcrumbs:p,children:[e.jsx(a,{title:t.title||"Assessment"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsx("div",{className:"relative flex flex-1 items-center justify-center rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsxs("div",{className:"w-full max-w-xl p-4 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:t.title}),e.jsx("p",{className:"text-muted-foreground",children:t.description}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Type:"})," ",v]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Time Window:"})," ",i.format("YYYY-MM-DD HH:mm")," â†’"," ",o.format("YYYY-MM-DD HH:mm")]}),u&&e.jsxs("p",{className:"text-green-600",children:["Ends in: ",e.jsx("strong",{children:o.from(s)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Duration:"})," ",t.duration??"N/A"," minutes"]})]}),t.instructions&&e.jsxs("div",{className:"my-4 rounded bg-gray-100 p-3 text-left dark:bg-gray-800",children:[e.jsx("p",{className:"font-semibold",children:"Instructions:"}),e.jsx("div",{className:"text-sm whitespace-pre-line",children:t.instructions})]}),e.jsx("div",{className:"space-x-2",children:e.jsxs("div",{className:"mt-4 space-y-2 text-sm text-red-600",children:[j&&e.jsxs("p",{children:["Starts at"," ",e.jsx("strong",{children:i.format("YYYY-MM-DD HH:mm")})]}),N&&e.jsx("p",{children:"Assessment has ended."}),e.jsxs("div",{children:[e.jsxs("p",{children:["You have exceeded the"," ",e.jsx("strong",{children:b})," attempts."]}),e.jsx(l,{variant:"default",disabled:!0,children:"Attempt Limited"}),e.jsx(A,{href:w("student.classes.subjects.assessments.request",{class_id:x,subject_id:h,assessment_id:t.id}),method:"post",as:l,variant:"default",className:"mt-4",children:"Start Assessment"})]})]})})]})})})]})}export{ue as default};
