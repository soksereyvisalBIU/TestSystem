import{a as f,h as xe,i as he,k as ae,j as t,c as me,e as be,t as de,f as ue,m as oe,A as je,H as ye}from"./app-CtGYIsX5.js";import{s as le}from"./index-ikzcNs2d.js";import{C as ve,S as ge}from"./subject-card-B3E3EqII.js";import{B as ee}from"./button-SSRY5RuB.js";import{I as Se}from"./input-iUu0P3yu.js";import{L as re}from"./label-BTRaqjID.js";import{S as Ce,a as _e,b as Ne,c as we,d as ce}from"./select-jt3QhMbO.js";import{T as De}from"./textarea-BNWfnkz6.js";import{M as Ie}from"./modal-DwetEt9-.js";import{X as ke}from"./x-DU5AeFAo.js";import{U as Ae}from"./upload-CNsjfr9T.js";import{L as pe}from"./loader-circle-BsNW6eBu.js";import{g as Le,b as Me,A as Re,a as Ee,c as Fe,d as Oe,f as Pe}from"./alert-dialog-54XvE1iS.js";import{A as Ue}from"./app-layout-BBM8JRvq.js";import Te from"./copy-subject-modal-DS-uwBNW.js";import{B as ze}from"./book-open-B5VUcvi6.js";import{S as Ge}from"./search-DRKxlw3r.js";import{P as Be}from"./plus-gayQ5510.js";import{T as He}from"./trash-DV09isZn.js";/* empty css            */import"./users-DBrrkKjv.js";import"./createLucideIcon-CxmHDfoc.js";import"./useCan-CiSWHoLd.js";import"./copy-bf6eAge9.js";import"./lock-DukH9Vjp.js";import"./shield-check-vjkCDSjn.js";import"./arrow-right-DEhewvfN.js";import"./clock-DLMNneh3.js";import"./index-BKaEAUkC.js";import"./index-CEEHIV-V.js";import"./index-CHXMgrNC.js";import"./utils-CFcDjcb_.js";import"./index-C59Bp4nL.js";import"./index-DBcQu2g4.js";import"./index-CXdRv3aZ.js";import"./index-C8PlrU9g.js";import"./index-CNX5aJ-H.js";import"./index-DwRVN30-.js";import"./dialog-CIu6aBNx.js";import"./index-BVpJEfSU.js";import"./index-CRv2uW8x.js";import"./index-C9d5FcxV.js";import"./index-84d56XFz.js";import"./index-D1QW2b5h.js";import"./index-G2kbjg3X.js";import"./chevron-up-ByWOggPX.js";import"./check-DIlxvegC.js";import"./index-ClDXPIEY.js";import"./tooltip-Kptx307E.js";import"./index-aq0HBlNE.js";import"./avatar-DxZQoBSB.js";import"./index-D82MWXkw.js";import"./index-BZB35nAZ.js";import"./index-CMWG4mbA.js";import"./command-UaJet_Jc.js";import"./app-logo-icon-Bxpw9t1P.js";import"./layout-grid-DEAqSi1K.js";import"./settings-2-CRDbYWN2.js";import"./appearance-tabs-header-BY9j7uhR.js";import"./sun-CTkdtCHx.js";import"./chevron-right-D9BgXrdj.js";import"./badge-DqD2fi5U.js";import"./popover-BkgqAohD.js";const $e=f.createContext(null);function Ve(){const l=f.useRef(!1);return xe(()=>(l.current=!0,()=>{l.current=!1}),[]),l}function We(){const l=Ve(),[e,s]=f.useState(0),i=f.useCallback(()=>{l.current&&s(e+1)},[e]);return[f.useCallback(()=>he.postRender(i),[i]),e]}const Xe=l=>!l.isLayoutDirty&&l.willUpdate(!1);function ne(){const l=new Set,e=new WeakMap,s=()=>l.forEach(Xe);return{add:i=>{l.add(i),e.set(i,i.addEventListener("willUpdate",s))},remove:i=>{l.delete(i);const p=e.get(i);p&&(p(),e.delete(i)),s()},dirty:s}}const fe=l=>l===!0,qe=l=>fe(l===!0)||l==="id",Je=({children:l,id:e,inherit:s=!0})=>{const i=f.useContext(ae),p=f.useContext($e),[a,d]=We(),n=f.useRef(null),u=i.id||p;n.current===null&&(qe(s)&&u&&(e=e?u+"-"+e:u),n.current={id:e,group:fe(s)&&i.group||ne()});const m=f.useMemo(()=>({...n.current,forceRender:a}),[d]);return t.jsx(ae.Provider,{value:m,children:l})};function Ke(l){const e=me.c(82),{isOpen:s,setIsOpen:i,classId:p,editingSubject:a}=l,d=!!a?.id,[n,u]=f.useState(null);let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={name:"",description:"",visibility:"public",cover:null},e[0]=m):m=e[0];const{data:o,setData:r,post:q,processing:N,errors:w,reset:H,clearErrors:te}=be(m);let T;e[1]!==te||e[2]!==a||e[3]!==d||e[4]!==s||e[5]!==H||e[6]!==r?(T=()=>{s&&(d&&a?(r({name:a.name||"",description:a.description||"",visibility:a.visibility||"public",cover:null}),u(a.cover?`/storage/${a.cover}`:null)):(H(),te(),u(null)))},e[1]=te,e[2]=a,e[3]=d,e[4]=s,e[5]=H,e[6]=r,e[7]=T):T=e[7];let J;e[8]!==a||e[9]!==d||e[10]!==s?(J=[s,a,d],e[8]=a,e[9]=d,e[10]=s,e[11]=J):J=e[11],f.useEffect(T,J);let z;e[12]!==r?(z=c=>{if(c){if(c.size>2097152){de.error("Max image size is 2MB");return}u(URL.createObjectURL(c)),r("cover",c)}},e[12]=r,e[13]=z):z=e[13];const se=z;let G;e[14]!==p||e[15]!==o.cover||e[16]!==o.description||e[17]!==o.name||e[18]!==o.visibility||e[19]!==a||e[20]!==d||e[21]!==q||e[22]!==i?(G=c=>{c.preventDefault(),d?ue.post(le("instructor.classes.subjects.update",[p,a.id]),{_method:"put",name:o.name,description:o.description,visibility:o.visibility,cover:o.cover},{forceFormData:!0,onSuccess:()=>{i(!1)}}):q(le("instructor.classes.subjects.store",p),{forceFormData:!0,onSuccess:()=>{i(!1)}})},e[14]=p,e[15]=o.cover,e[16]=o.description,e[17]=o.name,e[18]=o.visibility,e[19]=a,e[20]=d,e[21]=q,e[22]=i,e[23]=G):G=e[23];const W=G,$=d?"Update Subject":"Create Subject";let K;e[24]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(re,{children:"Subject Name"}),e[24]=K):K=e[24];let h;e[25]!==r?(h=c=>r("name",c.target.value),e[25]=r,e[26]=h):h=e[26];let b;e[27]!==o.name||e[28]!==h?(b=t.jsx(Se,{value:o.name,onChange:h}),e[27]=o.name,e[28]=h,e[29]=b):b=e[29];let P;e[30]!==w.name?(P=w.name&&t.jsx("p",{className:"text-xs text-destructive",children:w.name}),e[30]=w.name,e[31]=P):P=e[31];let j;e[32]!==P||e[33]!==b?(j=t.jsxs("div",{className:"space-y-2",children:[K,b,P]}),e[32]=P,e[33]=b,e[34]=j):j=e[34];let D;e[35]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(re,{children:"Description"}),e[35]=D):D=e[35];let I;e[36]!==r?(I=c=>r("description",c.target.value),e[36]=r,e[37]=I):I=e[37];let k;e[38]!==o.description||e[39]!==I?(k=t.jsx(De,{value:o.description,onChange:I}),e[38]=o.description,e[39]=I,e[40]=k):k=e[40];let A;e[41]!==w.description?(A=w.description&&t.jsx("p",{className:"text-xs text-destructive",children:w.description}),e[41]=w.description,e[42]=A):A=e[42];let L;e[43]!==k||e[44]!==A?(L=t.jsxs("div",{className:"space-y-2",children:[D,k,A]}),e[43]=k,e[44]=A,e[45]=L):L=e[45];let M;e[46]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(re,{children:"Visibility"}),e[46]=M):M=e[46];let y;e[47]!==r?(y=c=>r("visibility",c),e[47]=r,e[48]=y):y=e[48];let R;e[49]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(_e,{children:t.jsx(Ne,{})}),e[49]=R):R=e[49];let E;e[50]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsxs(we,{children:[t.jsx(ce,{value:"public",children:"Public"}),t.jsx(ce,{value:"private",children:"Private"})]}),e[50]=E):E=e[50];let v;e[51]!==o.visibility||e[52]!==y?(v=t.jsxs("div",{className:"space-y-2",children:[M,t.jsxs(Ce,{value:o.visibility,onValueChange:y,children:[R,E]})]}),e[51]=o.visibility,e[52]=y,e[53]=v):v=e[53];let B;e[54]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(re,{children:"Cover Image"}),e[54]=B):B=e[54];let g;e[55]!==se||e[56]!==n||e[57]!==r?(g=t.jsxs("div",{className:"space-y-2",children:[B,t.jsx("div",{className:"rounded-xl border-2 border-dashed p-4",children:n?t.jsxs("div",{className:"relative h-40",children:[t.jsx("img",{src:n,className:"h-full w-full rounded-lg object-cover"}),t.jsx(ee,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>{u(null),r("cover",null)},children:t.jsx(ke,{className:"h-4 w-4"})})]}):t.jsxs("label",{className:"flex cursor-pointer flex-col items-center gap-2 py-4",children:[t.jsx(Ae,{className:"h-5 w-5"}),t.jsx("span",{className:"text-xs",children:"Upload Image"}),t.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:c=>se(c.target.files?.[0])})]})})]}),e[55]=se,e[56]=n,e[57]=r,e[58]=g):g=e[58];let S;e[59]!==i?(S=t.jsx(ee,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e[59]=i,e[60]=S):S=e[60];let F;e[61]!==N?(F=N&&t.jsx(pe,{className:"mr-2 h-4 w-4 animate-spin"}),e[61]=N,e[62]=F):F=e[62];const V=d?"Save Changes":"Create";let U;e[63]!==N||e[64]!==F||e[65]!==V?(U=t.jsxs(ee,{type:"submit",disabled:N,children:[F,V]}),e[63]=N,e[64]=F,e[65]=V,e[66]=U):U=e[66];let C;e[67]!==S||e[68]!==U?(C=t.jsxs("div",{className:"flex justify-end gap-3 border-t pt-5",children:[S,U]}),e[67]=S,e[68]=U,e[69]=C):C=e[69];let _;e[70]!==W||e[71]!==j||e[72]!==L||e[73]!==v||e[74]!==g||e[75]!==C?(_=t.jsxs("form",{className:"space-y-6 pt-4",onSubmit:W,children:[j,L,v,g,C]}),e[70]=W,e[71]=j,e[72]=L,e[73]=v,e[74]=g,e[75]=C,e[76]=_):_=e[76];let O;return e[77]!==s||e[78]!==i||e[79]!==_||e[80]!==$?(O=t.jsx(Ie,{size:"lg",isOpen:s,setIsOpen:i,title:$,children:_}),e[77]=s,e[78]=i,e[79]=_,e[80]=$,e[81]=O):O=e[81],O}const Qe=f.memo(ge);function us(l){const e=me.c(75),{classroom:s,allAvailableClasses:i}=l;let p;e[0]!==i?(p=i===void 0?[]:i,e[0]=i,e[1]=p):p=e[1];const a=p;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d={subject:!1,copy:!1,delete:!1},e[2]=d):d=e[2];const[n,u]=f.useState(d),[m,o]=f.useState(null),[r,q]=f.useState(!1);let N;e[3]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{o(null),u(st)},e[3]=N):N=e[3];const w=N;let H;e[4]===Symbol.for("react.memo_cache_sentinel")?(H=x=>{o(x),u(tt)},e[4]=H):H=e[4];const te=H;let T;e[5]===Symbol.for("react.memo_cache_sentinel")?(T=x=>{o(x),u(et)},e[5]=T):T=e[5];const J=T;let z;e[6]===Symbol.for("react.memo_cache_sentinel")?(z=x=>{o(x),u(Ze)},e[6]=z):z=e[6];const se=z;let G;e[7]!==m||e[8]!==s.id?(G=()=>{m&&ue.delete(le("instructor.classes.subjects.destroy",[s.id,m.id]),{preserveScroll:!0,onStart:()=>q(!0),onSuccess:()=>{de.success("Subject removed"),u(Ye)},onFinish:()=>q(!1)})},e[7]=m,e[8]=s.id,e[9]=G):G=e[9];const W=G;let $;e[10]===Symbol.for("react.memo_cache_sentinel")?($={title:"Classes",href:le("instructor.classes.index")},e[10]=$):$=e[10];const K=s.name;let h;e[11]!==s.id?(h=le("instructor.classes.show",s.id),e[11]=s.id,e[12]=h):h=e[12];let b;e[13]!==s.name||e[14]!==h?(b=[$,{title:K,href:h}],e[13]=s.name,e[14]=h,e[15]=b):b=e[15];const P=`${s.name} | Curriculum`;let j;e[16]!==P?(j=t.jsx(ye,{title:P}),e[16]=P,e[17]=j):j=e[17];let D;e[18]!==s?(D=t.jsx(ve,{classroom:s}),e[18]=s,e[19]=D):D=e[19];let I;e[20]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-8 w-1 rounded-full bg-blue-600"}),t.jsx("h2",{className:"text-sm sm:text-xl font-black tracking-tight text-slate-900 uppercase dark:text-white",children:"Subject Modules"})]}),e[20]=I):I=e[20];let k;e[21]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsxs("div",{className:"group relative",children:[t.jsx(Ge,{className:"absolute top-1/2 left-3 size-4 -translate-y-1/2 text-slate-400 transition-colors group-focus-within:text-blue-500"}),t.jsx("input",{type:"text",placeholder:"Filter curriculum...",className:"w-full rounded-2xl border border-slate-200 bg-white py-2.5 pr-4 pl-10 text-sm font-medium transition-all focus:ring-2 focus:ring-blue-500 md:w-[300px] dark:border-slate-800 dark:bg-slate-900"})]}),e[21]=k):k=e[21];let A;e[22]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(Be,{className:"sm:mr-2 h-5 w-5"}),e[22]=A):A=e[22];let L;e[23]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between",children:[I,t.jsxs("div",{className:"flex items-center gap-4",children:[k,t.jsxs(ee,{onClick:w,className:"sm:h-11 rounded-full px-6 shadow-lg transition-all hover:scale-105 active:scale-95",children:[A," Add ",t.jsx("span",{className:"hidden sm:block",children:"Subject"})]})]})]}),e[23]=L):L=e[23];let M;e[24]!==s.id||e[25]!==s.subjects?(M=s?.subjects?.map((x,X)=>t.jsx(oe.div,{layout:!0,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{type:"spring",stiffness:300,damping:25,delay:X*.05},children:t.jsx(Qe,{subject:x,classId:s.id,onEdit:te,onCopy:J,onDelete:se})},x.id)),e[24]=s.id,e[25]=s.subjects,e[26]=M):M=e[26];let y;e[27]!==M?(y=t.jsx(Je,{children:t.jsx(oe.div,{layout:!0,className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:t.jsx(je,{mode:"popLayout",children:M})})}),e[27]=M,e[28]=y):y=e[28];let R;e[29]!==s.subjects?(R=(!s?.subjects||s.subjects.length===0)&&t.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},className:"flex h-80 flex-col items-center justify-center rounded-[2rem] border-2 border-dashed border-muted bg-muted/20",children:[t.jsx(ze,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),t.jsx("p",{className:"text-xl font-medium text-muted-foreground",children:"No subjects found"}),t.jsx(ee,{variant:"link",onClick:w,children:"Create your first subject"})]}),e[29]=s.subjects,e[30]=R):R=e[30];let E;e[31]!==y||e[32]!==R?(E=t.jsxs("div",{className:"space-y-6",children:[L,y,R]}),e[31]=y,e[32]=R,e[33]=E):E=e[33];let v;e[34]!==D||e[35]!==E?(v=t.jsxs("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 lg:px-12",children:[D,E]}),e[34]=D,e[35]=E,e[36]=v):v=e[36];let B;e[37]===Symbol.for("react.memo_cache_sentinel")?(B=x=>u(X=>({...X,subject:x})),e[37]=B):B=e[37];let g;e[38]!==m||e[39]!==s.id||e[40]!==n.subject?(g=t.jsx(Ke,{isOpen:n.subject,setIsOpen:B,classId:s.id,editingSubject:m}),e[38]=m,e[39]=s.id,e[40]=n.subject,e[41]=g):g=e[41];let S;e[42]!==m||e[43]!==a||e[44]!==s.id||e[45]!==n.copy?(S=n.copy&&m&&t.jsx(Te,{isOpen:n.copy,setIsOpen:x=>u(X=>({...X,copy:x})),subjectToCopy:m,availableClasses:a,sourceClassId:s.id}),e[42]=m,e[43]=a,e[44]=s.id,e[45]=n.copy,e[46]=S):S=e[46];let F;e[47]===Symbol.for("react.memo_cache_sentinel")?(F=x=>u(X=>({...X,delete:x})),e[47]=F):F=e[47];let V;e[48]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx(Me,{className:"text-2xl font-bold",children:"Delete Subject?"}),e[48]=V):V=e[48];const U=m?.name;let C;e[49]!==U?(C=t.jsxs(Re,{children:[V,t.jsxs(Ee,{children:["Are you sure you want to remove"," ",t.jsx("span",{className:"font-bold text-foreground",children:U}),"? This action cannot be undone."]})]}),e[49]=U,e[50]=C):C=e[50];let _;e[51]!==r?(_=t.jsx(Fe,{disabled:r,className:"rounded-full",children:"Cancel"}),e[51]=r,e[52]=_):_=e[52];let O;e[53]!==r?(O=r?t.jsx(pe,{className:"animate-spin"}):t.jsx(He,{className:"mr-2 h-4 w-4"}),e[53]=r,e[54]=O):O=e[54];let c;e[55]!==W||e[56]!==r||e[57]!==O?(c=t.jsxs(ee,{variant:"destructive",onClick:W,disabled:r,className:"rounded-full px-6",children:[O,"Confirm Delete"]}),e[55]=W,e[56]=r,e[57]=O,e[58]=c):c=e[58];let Q;e[59]!==_||e[60]!==c?(Q=t.jsxs(Oe,{className:"gap-2",children:[_,c]}),e[59]=_,e[60]=c,e[61]=Q):Q=e[61];let Y;e[62]!==C||e[63]!==Q?(Y=t.jsxs(Pe,{className:"rounded-[2rem]",children:[C,Q]}),e[62]=C,e[63]=Q,e[64]=Y):Y=e[64];let Z;e[65]!==n.delete||e[66]!==Y?(Z=t.jsx(Le,{open:n.delete,onOpenChange:F,children:Y}),e[65]=n.delete,e[66]=Y,e[67]=Z):Z=e[67];let ie;return e[68]!==b||e[69]!==j||e[70]!==v||e[71]!==g||e[72]!==S||e[73]!==Z?(ie=t.jsxs(Ue,{breadcrumbs:b,children:[j,v,g,S,Z]}),e[68]=b,e[69]=j,e[70]=v,e[71]=g,e[72]=S,e[73]=Z,e[74]=ie):ie=e[74],ie}function Ye(l){return{...l,delete:!1}}function Ze(l){return{...l,delete:!0}}function et(l){return{...l,copy:!0}}function tt(l){return{...l,subject:!0}}function st(l){return{...l,subject:!0}}export{us as default};
