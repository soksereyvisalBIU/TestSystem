import{c as J,a as H,j as t,H as ae,A as le,m as Y,L as Q}from"./app-C4-wZLjv.js";import{A as ie}from"./AssessmentResultCard-DrNYVEwH.js";import{A as ne}from"./AssessmentSkeleton-DUHJji74.js";import{A as se}from"./app-layout-CNHzTDPv.js";import{d as x}from"./dayjs.min-6cGuIIDv.js";import{d as oe}from"./duration-_NP3wtoM.js";import{u as me,t as ce,r as de}from"./utc-DP33K9Qb.js";import{s as W}from"./index-ikzcNs2d.js";import{C as xe}from"./circle-check-CE5iqhEP.js";import{C as fe}from"./circle-alert-BQkIx_3U.js";import{C as ue}from"./clock-CiUKO93g.js";import{P as pe}from"./play-Bvl4HonW.js";import{A as he}from"./arrow-right-CCFdR1G3.js";import{F as ge}from"./file-check-6a35Q9q-.js";import"./app-Ctpas7OY.js";import"./confetti.module-Cx83yTHA.js";import"./use-transform-CzhUcVDC.js";import"./index-pPUi9S1_.js";import"./index-CmRgzCPv.js";import"./index-Buz4j_7Y.js";import"./index-CHXMgrNC.js";import"./utils-CFcDjcb_.js";import"./button-BtXHUDlw.js";import"./dialog-C5dD38AA.js";import"./index-DeD9CSgl.js";import"./index-CNKjpVcS.js";import"./index-Xko6ReMJ.js";import"./index-C3tRsT71.js";import"./index-Bhes_7Zs.js";import"./index-cZrIM-8D.js";import"./index-ChzAp34M.js";import"./x-cYyiHa3X.js";import"./createLucideIcon-DDKIJ2e3.js";import"./tooltip-i2vZDwaq.js";import"./index-BthvL4JC.js";import"./index-CeYVXcUJ.js";import"./index-Clov3BKf.js";import"./index-BmIIwECa.js";import"./index-DRemKmJw.js";import"./avatar-DWKof1ni.js";import"./index-C2fpaiMf.js";import"./index-BZB35nAZ.js";import"./index-CMWG4mbA.js";import"./command-HKHPfprr.js";import"./search-Cxo_qDnu.js";import"./app-logo-icon-BJ5tEmQI.js";import"./layout-grid-CEBlWw-x.js";import"./users-CUYIQcdw.js";import"./settings-2-DUZge6eM.js";import"./cpu-DrMaJJL5.js";import"./book-open-DhnomZaK.js";import"./chevron-right-CZckLAVz.js";import"./appearance-tabs-header-DkuhK1KQ.js";import"./sun-DVv0vIb6.js";x.extend(me);x.extend(ce);x.extend(de);x.extend(oe);const be=(c,e,s,l)=>{if(!c)return"LOADING";const o=x(e.start_time),r=x(e.end_time);if(l?.status==="submitted"&&l.score===void 0)return"PENDING_GRADING";if(l?.status==="draft")return"RESUME";if((l?.score!==void 0||s?.score!==null)&&(s?.status==="scored"||l?.status==="graded"))return"GRADED";if(c.isBefore(o))return"UPCOMING";if(c.isAfter(r))return"EXPIRED";const i=s?.attempted_amount??0,m=e.max_attempts;return m>0&&i>=m?"NO_ATTEMPTS_LEFT":"ACTIVE"},re=H.memo(c=>{const e=J.c(34),{targetDate:s,label:l,onZero:o}=c,[r,a]=H.useState(null);let i,m;if(e[0]!==o||e[1]!==s?(i=()=>{const T=x(s),A=()=>{const C=x(),R=T.diff(C);if(R<=0){a(x.duration(0)),o&&o();return}a(x.duration(R))};A();const E=setInterval(A,1e3);return()=>clearInterval(E)},m=[s,o],e[0]=o,e[1]=s,e[2]=i,e[3]=m):(i=e[2],m=e[3]),H.useEffect(i,m),!r||r.asSeconds()<=0)return null;let d;e[4]!==r?(d=r.asDays(),e[4]=r,e[5]=d):d=e[5];const f=Math.floor(d);let u;e[6]!==f?(u={label:"Days",value:f},e[6]=f,e[7]=u):u=e[7];let n;e[8]!==r?(n=r.hours(),e[8]=r,e[9]=n):n=e[9];let j;e[10]!==n?(j={label:"Hours",value:n},e[10]=n,e[11]=j):j=e[11];let p;e[12]!==r?(p=r.minutes(),e[12]=r,e[13]=p):p=e[13];let v;e[14]!==p?(v={label:"Minutes",value:p},e[14]=p,e[15]=v):v=e[15];let h;e[16]!==r?(h=r.seconds(),e[16]=r,e[17]=h):h=e[17];let _;e[18]!==h?(_={label:"Seconds",value:h},e[18]=h,e[19]=_):_=e[19];let N;e[20]!==_||e[21]!==u||e[22]!==j||e[23]!==v?(N=[u,j,v,_],e[20]=_,e[21]=u,e[22]=j,e[23]=v,e[24]=N):N=e[24];const I=N;let w,g;e[25]===Symbol.for("react.memo_cache_sentinel")?(w={opacity:0,y:10},g={opacity:1,y:0},e[25]=w,e[26]=g):(w=e[25],g=e[26]);let b;e[27]!==l?(b=t.jsx("p",{className:"mb-4 text-center text-xs font-bold tracking-widest text-blue-600 uppercase dark:text-blue-400",children:l}),e[27]=l,e[28]=b):b=e[28];let y;e[29]!==I?(y=t.jsx("div",{className:"flex justify-center gap-3 sm:gap-4",children:I.map(je)}),e[29]=I,e[30]=y):y=e[30];let k;return e[31]!==b||e[32]!==y?(k=t.jsxs(Y.div,{initial:w,animate:g,className:"mb-8",children:[b,y]}),e[31]=b,e[32]=y,e[33]=k):k=e[33],k}),ye=H.memo(c=>{const e=J.c(11),{assessment:s,attemptsUsed:l,highlightAttempts:o}=c;let r;e[0]!==s.type?(r=t.jsx(ee,{label:"Format",value:s.type}),e[0]=s.type,e[1]=r):r=e[1];const a=`${s.duration} min`;let i;e[2]!==a?(i=t.jsx(ee,{label:"Duration",value:a}),e[2]=a,e[3]=i):i=e[3];const m=`${l} / ${s.max_attempts===0?"âˆž":s.max_attempts}`;let d;e[4]!==o||e[5]!==m?(d=t.jsx(ee,{label:"Attempts",value:m,highlight:o}),e[4]=o,e[5]=m,e[6]=d):d=e[6];let f;return e[7]!==r||e[8]!==i||e[9]!==d?(f=t.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-4 sm:grid-cols-3",children:[r,i,d]}),e[7]=r,e[8]=i,e[9]=d,e[10]=f):f=e[10],f}),ee=c=>{const e=J.c(8),{label:s,value:l,highlight:o}=c;let r;e[0]!==s?(r=t.jsx("span",{className:"mb-1 text-[10px] font-bold tracking-wider text-gray-400 uppercase",children:s}),e[0]=s,e[1]=r):r=e[1];const a=`text-sm font-bold ${o?"text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-gray-100"}`;let i;e[2]!==a||e[3]!==l?(i=t.jsx("span",{className:a,children:l}),e[2]=a,e[3]=l,e[4]=i):i=e[4];let m;return e[5]!==r||e[6]!==i?(m=t.jsxs("div",{className:"flex flex-col items-center justify-center rounded-xl bg-gray-50 p-4 dark:bg-gray-800/50",children:[r,i]}),e[5]=r,e[6]=i,e[7]=m):m=e[7],m};function _t(c){const e=J.c(77),{assessment:s,class_id:l,subject_id:o,studentAssessment:r,studentAssessmentAttempt:a}=c,[i,m]=H.useState(null);let d,f;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{m(x())},f=[],e[0]=d,e[1]=f):(d=e[0],f=e[1]),H.useEffect(d,f);let u;e[2]!==s||e[3]!==i||e[4]!==r||e[5]!==a?(u=be(i,s,r,a),e[2]=s,e[3]=i,e[4]=r,e[5]=a,e[6]=u):u=e[6];const n=u,j=r?.attempted_amount??0;let p;e[7]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{m(x())},e[7]=p):p=e[7];const v=p;if(!i){let D;e[8]===Symbol.for("react.memo_cache_sentinel")?(D=[{title:"Assessments",href:"#"}],e[8]=D):D=e[8];let S;return e[9]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx(se,{breadcrumbs:D,children:t.jsx("div",{className:"flex min-h-[80vh] items-center justify-center p-4",children:t.jsx(ne,{})})}),e[9]=S):S=e[9],S}let h;e[10]!==s.end_time||e[11]!==s.max_score||e[12]!==s.start_time||e[13]!==n||e[14]!==r?.score||e[15]!==a?.completed_at||e[16]!==a?.score?(h=()=>{switch(n){case"PENDING_GRADING":return t.jsxs(Y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex flex-col items-center rounded-2xl bg-amber-50 p-8 text-center ring-1 ring-amber-100 dark:bg-amber-900/10 dark:ring-amber-800",children:[t.jsx("div",{className:"mb-4 rounded-full bg-amber-100 p-3 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400",children:t.jsx(ue,{className:"h-8 w-8"})}),t.jsx("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:"Submission Under Review"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your assessment has been submitted successfully. Scores will be available once the teacher completes grading."})]});case"GRADED":{const D=a?.score??r?.score??0,S=s.max_score??100,te=D/S*100;return t.jsx(ie,{score:te,maxScore:100,isPassing:te>=50,completedAt:a?.completed_at})}case"UPCOMING":return t.jsx(re,{targetDate:s.start_time,label:"Assessment Starts In",onZero:v});case"ACTIVE":case"RESUME":case"NO_ATTEMPTS_LEFT":return x().isBefore(x(s.end_time))?t.jsx(re,{targetDate:s.end_time,label:"Time Remaining",onZero:v}):null;case"EXPIRED":return t.jsxs("div",{className:"mb-6 flex flex-col items-center justify-center rounded-xl bg-gray-100 py-8 text-center dark:bg-gray-800",children:[t.jsx("div",{className:"mb-3 rounded-full bg-gray-200 p-3 text-gray-500 dark:bg-gray-700",children:t.jsx(fe,{className:"h-6 w-6"})}),t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Assessment Closed"}),t.jsx("p",{className:"text-sm text-gray-500",children:"The deadline for this assessment has passed."})]});default:return null}},e[10]=s.end_time,e[11]=s.max_score,e[12]=s.start_time,e[13]=n,e[14]=r?.score,e[15]=a?.completed_at,e[16]=a?.score,e[17]=h):h=e[17];const _=h;let N;e[18]!==s.id||e[19]!==l||e[20]!==n||e[21]!==a?.id||e[22]!==o?(N=()=>{const D=n==="ACTIVE",S=n==="RESUME";return!D&&!S?null:t.jsx(Q,{href:W("student.classes.subjects.assessments.request",{class_id:l,subject_id:o,assessment_id:s.id,student_assessment_attempt_id:a?.id??null}),method:"post",as:"button",className:"group relative w-full overflow-hidden rounded-xl bg-blue-600 py-4 text-lg font-bold text-white shadow-lg shadow-blue-200 transition-all hover:-translate-y-0.5 hover:bg-blue-700 hover:shadow-xl dark:shadow-none",children:t.jsx("span",{className:"flex items-center justify-center gap-2",children:S?t.jsxs(t.Fragment,{children:[t.jsx(pe,{className:"h-5 w-5 fill-current"})," Resume Attempt"]}):t.jsxs(t.Fragment,{children:["Start Assessment ",t.jsx(he,{className:"h-5 w-5 transition-transform group-hover:translate-x-1"})]})})})},e[18]=s.id,e[19]=l,e[20]=n,e[21]=a?.id,e[22]=o,e[23]=N):N=e[23];const I=N;let w;e[24]===Symbol.for("react.memo_cache_sentinel")?(w=[{title:"Assessments",href:"#"}],e[24]=w):w=e[24];let g;e[25]!==s.title?(g=t.jsx(ae,{title:s.title}),e[25]=s.title,e[26]=g):g=e[26];let b,y,k;e[27]===Symbol.for("react.memo_cache_sentinel")?(k={opacity:0,y:20},b={opacity:1,y:0},y={duration:.5,ease:"easeOut"},e[27]=b,e[28]=y,e[29]=k):(b=e[27],y=e[28],k=e[29]);let T;e[30]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-white shadow-md ring-1 ring-gray-100 dark:bg-gray-700 dark:ring-gray-600",children:t.jsx(ge,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),e[30]=T):T=e[30];let A;e[31]!==s.title?(A=t.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900 dark:text-white",children:s.title}),e[31]=s.title,e[32]=A):A=e[32];let E;e[33]!==s.description?(E=s.description&&t.jsx("p",{className:"mx-auto mt-3 max-w-lg text-base text-gray-500 dark:text-gray-400",children:s.description}),e[33]=s.description,e[34]=E):E=e[34];let C;e[35]!==A||e[36]!==E?(C=t.jsxs("div",{className:"border-b border-gray-100 bg-gray-50/80 p-8 text-center backdrop-blur-sm dark:border-gray-700 dark:bg-gray-800/80",children:[T,A,E]}),e[35]=A,e[36]=E,e[37]=C):C=e[37];let R,Z,X,q;e[38]===Symbol.for("react.memo_cache_sentinel")?(R={opacity:0,y:10},Z={opacity:1,y:0},X={opacity:0,y:-10},q={duration:.2},e[38]=R,e[39]=Z,e[40]=X,e[41]=q):(R=e[38],Z=e[39],X=e[40],q=e[41]);let G;e[42]!==_?(G=_(),e[42]=_,e[43]=G):G=e[43];let P;e[44]!==n||e[45]!==G?(P=t.jsx(le,{mode:"wait",children:t.jsx(Y.div,{initial:R,animate:Z,exit:X,transition:q,children:G},n)}),e[44]=n,e[45]=G,e[46]=P):P=e[46];const K=n==="ACTIVE";let M;e[47]!==s||e[48]!==j||e[49]!==K?(M=t.jsx(ye,{assessment:s,attemptsUsed:j,highlightAttempts:K}),e[47]=s,e[48]=j,e[49]=K,e[50]=M):M=e[50];let U;e[51]!==I?(U=I(),e[51]=I,e[52]=U):U=e[52];let L;e[53]!==s.id||e[54]!==l||e[55]!==n||e[56]!==a||e[57]!==o?(L=n==="GRADED"&&a?.id&&t.jsxs(Q,{href:W("student.classes.subjects.assessments.attempt.review",{class_id:l,subject_id:o,assessment_id:s.id,student_assessment_attempt_id:a.id}),className:"flex w-full items-center justify-center gap-2 rounded-xl border border-gray-200 bg-white py-3.5 font-semibold text-gray-700 transition-colors hover:bg-gray-50 hover:text-blue-600 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",children:[t.jsx(xe,{className:"h-4 w-4"}),"Review Answers"]}),e[53]=s.id,e[54]=l,e[55]=n,e[56]=a,e[57]=o,e[58]=L):L=e[58];let $;e[59]!==l?($=W("student.classes.show",l),e[59]=l,e[60]=$):$=e[60];let F;e[61]!==$?(F=t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsx(Q,{href:$,className:"text-sm font-medium text-gray-400 transition-colors hover:text-gray-600 dark:hover:text-gray-300",children:"Cancel and return to class"})}),e[61]=$,e[62]=F):F=e[62];let O;e[63]!==U||e[64]!==L||e[65]!==F?(O=t.jsxs("div",{className:"mt-8 space-y-3",children:[U,L,F]}),e[63]=U,e[64]=L,e[65]=F,e[66]=O):O=e[66];let V;e[67]!==P||e[68]!==M||e[69]!==O?(V=t.jsxs("div",{className:"p-6 sm:p-8",children:[P,M,O]}),e[67]=P,e[68]=M,e[69]=O,e[70]=V):V=e[70];let B;e[71]!==C||e[72]!==V?(B=t.jsx("div",{className:"flex min-h-[85vh] flex-col items-center justify-center p-4 md:p-8",children:t.jsx(Y.div,{initial:k,animate:b,transition:y,className:"w-full max-w-2xl",children:t.jsxs("div",{className:"overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-xl dark:border-gray-700 dark:bg-gray-800",children:[C,V]})})}),e[71]=C,e[72]=V,e[73]=B):B=e[73];let z;return e[74]!==B||e[75]!==g?(z=t.jsxs(se,{breadcrumbs:w,children:[g,B]}),e[74]=B,e[75]=g,e[76]=z):z=e[76],z}function je(c){return(c.label!=="Days"||c.value>0)&&t.jsxs("div",{className:"flex min-w-[72px] flex-col items-center rounded-xl border border-gray-100 bg-white p-3 shadow-sm dark:border-gray-700 dark:bg-gray-800",children:[t.jsx("span",{className:"font-mono text-2xl font-bold text-gray-900 dark:text-white",children:String(c.value).padStart(2,"0")}),t.jsx("span",{className:"text-[10px] font-bold tracking-wider text-gray-400 uppercase",children:c.label})]},c.label)}export{_t as default};
